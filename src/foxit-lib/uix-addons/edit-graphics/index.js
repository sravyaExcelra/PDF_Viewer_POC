!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("PDFViewCtrl"),require("UIExtension")):"function"==typeof define&&define.amd?define(["PDFViewCtrl","UIExtension"],e):"object"==typeof exports?exports.UIExtension_EditGraphicsAddon=e(require("PDFViewCtrl"),require("UIExtension")):t.UIExtension_EditGraphicsAddon=e(t.PDFViewCtrl,t.UIExtension)}(self,(function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=11)}([function(e,n){e.exports=t},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),o=n(4),i=(a(n(15)),a(n(20)));function a(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var s=r.Deps.jQuery,u=r.shared.browser.getPtPxRatio,f=r.Events,p=function(t){function e(n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.graphicsObject=n,i.pageRender=r,i.dependences=o,i}return c(e,t),e.prototype.doActive=function(){var t=this.$handler,e=this.dependences.pdfViewer;if(!t){t=this.initUI(),this.$handler=t;var n=this.getContextMenuConfig();n&&!this.contextmenu&&(this.contextmenu=e.viewerUI.createContextMenu(this,t.get(0),n))}this.dependences.pdfViewer.activeElement(this),t.addClass("fwr__active"),this.updateShapeControl(),this.bindEvent(),this.undoSwitchBinder=e.switchKeyboardEventBinder(o.ACTIVATION_ANNOTATION_BINDER)},e.prototype.getContextMenuConfig=function(){},e.prototype.getContextMenuComponentName=function(){(0,i.default)()},e.prototype.removeGraphicObject=function(){this.remove()},e.prototype.remove=function(){var t=this;if(this.isActive){var e=this.dependences.pdfViewer;e.getAllActiveElements().forEach((function(e){e.unActive(),e!==t&&e.remove&&e.remove()})),0===e.getAllActiveElements().length&&e.activeElement()}},e.prototype.bindEvent=function(){var t=this,e=this.dependences.pdfViewer;this.__off__delete__event__&&this.__off__delete__event__(),this.__off__delete__event__=e.getKeyboardEventBinder(o.ACTIVATION_ANNOTATION_BINDER).on(o.KEY_MAP_DELETE_ANNOTATION,(function(e){t.removeGraphicObject(),e.stopPropagation(),t.__off__delete__event__()})),this.__off__esc__event__&&this.__off__esc__event__(),this.__off__esc__event__=e.getKeyboardEventBinder(o.EDIT_TEXT_OBJECT_BINDER).on(o.KEY_MAP_UNFOCUS_FROM_EDITTING_TEXT_OBJECT,(function(e){t.unActive(!0),e.stopPropagation()})),this.__off_active_escape_event&&this.__off_active_escape_event(),this.__off_active_escape_event=e.getKeyboardEventBinder(o.ACTIVATION_ANNOTATION_BINDER).on(o.KEY_MAP_UNACTIVE_ANNOTATION,(function(e){t.unActive()}))},e.prototype.unBindEvent=function(){this.__off__delete__event__&&this.__off__delete__event__(),this.__off__delete__event__=function(){},this.__off__esc__event__&&this.__off__esc__event__(),this.__off__esc__event__=function(){},this.__off_active_escape_event&&this.__off_active_escape_event(),delete this.__off_active_escape_event},e.prototype.translateContextMenuName=function(t){for(var e in t)switch(e){case"items":var n=t[e],r=this.dependences.pdfViewer.i18n;for(var o in n){var i=n[o];i.nameI18nKey&&(i.name=r.t(i.nameI18nKey))}}return t},e.prototype.updateShapeControl=function(){var t=this.getBoundary(),e=this._getShapeControllerBoundaryBox();this.shapeControl&&this.shapeControl.active(this.$handler,t,e)},e.prototype.unActive=function(){this.isActive&&(t.prototype.unActive.call(this),this.$handler&&(this.$handler.removeClass("fwr__active"),this.shapeControl&&this.shapeControl.deactive(),this.dependences.pdfViewer.eventEmitter.off(f.zoomToSuccess,this.afterZoom),this.$handler&&this.$handler.remove(),this.$handler=null,this.unBindEvent(),this.undoSwitchBinder&&this.undoSwitchBinder(),this.$charEditContainer&&this.$charEditContainer.off("focus")))},e.prototype.doDeactive=function(){},e.prototype.destroy=function(){this.unActive(),this.shapeControl.destroy(),this.contextmenu&&this.contextmenu.destroy()},e.prototype.getModel=function(){return this.graphicsObject},e.prototype._getShapeControllerBoundaryBox=function(){var t=this.pageRender.page,e=u()*this.pageRender.getScale(),n=t.getPxWidth()*e,r=t.getPxHeight()*e;if(this.pageRender.rotate%180!=0){var o=[n,r];r=o[0],n=o[1]}return{left:0,top:0,width:n,height:r}},e.prototype.getBoundary=function(){var t=this.pageRender.page,e=this.graphicsObject.getRect(),n=t.getDeviceRect(e,this.pageRender.getScale(),this.pageRender.getRotation());return{left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top}},e.prototype.initUI=function(){var t=this;if(!this.$handler){var e=this.$handler=s('<div class="fwr__graphics-object-handler"\n        ></div>');this.pageRender.pageHandler.$handler.append(e),e.get(0).__graphics_object_component=this,this.shapeControl=new r.ShapeControl({prestart:function(){return t.onPrestart()},start:function(e,n,r){return t.onStartUpdateShape(e,n,r)},moving:function(e,n,r){var o=r.offsetX,i=r.offsetY;return t.onShapeMoving(e,n,o,i)},update:function(e,n){return t.onShapeUpdating(e,n)},end:function(e,n,r,o){return t.onShapeUpdateEnd(e,n,r,o)},afterEnd:function(e){return t.onAfterShapeCtrlEnd(e)},resizable:!0,enableDiagonally:!0,enableFrame:!0,previewer:!0});var n=this;return this.dependences.pdfViewer.eventEmitter.on(f.zoomToSuccess,this.afterZoom=function(){n.updateShapeControl()}),this.$handler}},e.prototype.onPrestart=function(){var t=this;this.dependences.pdfViewer.getAllActiveElements().forEach((function(n){n!==t&&n instanceof e&&t.shapeControl.companion(n.shapeControl)}))},e.prototype.onAfterShapeCtrlEnd=function(t){this.shapeControl.clearCompanions()},e.prototype.onStartUpdateShape=function(t,e,n){var r=this;if("move"){if(this.dependences.pdfViewer.getAllActiveElements().length>1)return;s(this.shapeControl.ui.querySelector(".fv__shape-control-previewer")).show(),this.graphicsObject.getBitmap(this.pageRender.getScale(),this.pageRender.getRotation()).then((function(t){if(t){var e=r.shapeControl.getPreviewerContext();s(e.canvas).attr({width:t.width,height:t.height});var n=e.createImageData(t.width,t.height+1),o=new(Uint8ClampedArray||Uint8Array)(t.buffer);n.data.set(o),e.putImageData(n,0,0)}}))}},e.prototype.onShapeMoving=function(t,e){},e.prototype.onShapeUpdating=function(t,e){},e.prototype.onShapeUpdateEnd=function(t,e,n){var r=this,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=Object.assign({},t);i.right=i.left+i.width,i.bottom=i.top+i.height,i=this.pageRender.page.reverseDeviceRect(i,this.pageRender.getScale(),this.pageRender.getRotation()),this.graphicsObject.setRect(i,o).then((function(t){s(r.shapeControl.ui.querySelector(".fv__shape-control-previewer")).hide(),r.updateShapeControl()}))},e.prototype.setColor=function(t){return this.graphicsObject.setBorderColor(t)},e.prototype.setBorderStyle=function(t,e){var n=this;return this.graphicsObject.setBorderStyle(t,e).then((function(t){n.updateShapeControl()}))},e.prototype.setOpacity=function(t){return this.graphicsObject.setOpacity(t)},e.prototype.setFillColor=function(t){return this.graphicsObject.setFillColor(t)},e.prototype.setBorderWidth=function(t){var e=this;return this.graphicsObject.setBorderWidth(t).then((function(t){e.updateShapeControl()}))},e}(r.shared.activation.Activatable);e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getClientX=function(t){if("clientX"in t)return t.clientX;switch(t.type){case"touchstart":case"touchmove":return t.touches[0].clientX;case"touchend":case"touchcancel":return t.changedTouches[0].clientX}},e.getClientY=function(t){if("clientY"in t)return t.clientY;switch(t.type){case"touchstart":case"touchmove":return t.touches[0].clientY;case"touchend":case"touchcancel":return t.changedTouches[0].clientY}}},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e)}function o(t){return"number"==typeof t}function i(t){return o(t)&&Math.floor(t)===t}function a(t){return Math.pow(Math.floor(t),2)!==t}function c(t){return(t%360+360)%360%90==0}function s(t,e,n,r,o){return void 0===r&&(r=!1),void 0===o&&(o=!1),(r?t>=e:t>e)&&(o?t<=n:t<n)}n.r(e),n.d(e,"assertThat",(function(){return r})),n.d(e,"isNumber",(function(){return o})),n.d(e,"isInteger",(function(){return i})),n.d(e,"isSquaredNumber",(function(){return a})),n.d(e,"isValidRotationAngle",(function(){return c})),n.d(e,"isNumberInRange",(function(){return s}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.KEY_MAP_SELECT_ALL_ANNOTATIONS="selectAllAnnotations",e.KEY_MAP_POLYLINE_DELETE_LAST_POINT="createPolyline_DeleteLastPoint",e.KEY_MAP_DOCUMENT_UNDO="undo",e.KEY_MAP_DOCUMENT_REDO="redo",e.KEY_MAP_ZOOM_IN="pageZoomIn",e.KEY_MAP_ZOOM_OUT="pageZoomOut",e.KEY_MAP_DELETE_ANNOTATION="delete-annotation",e.KEY_MAP_ESC_CREATING_DRAWING="cancel-creating-drawing-annot",e.KEY_MAP_UNACTIVE_ANNOTATION="unactive-annotation",e.KEY_MAP_UNFOCUS_FROM_EDITTING_TEXT_OBJECT="unfocus-from-editting-text-object",e.KEY_MAP_FIELD_TAB_NEXT="FIELD_TAB_ACTION",e.GLOBAL_BINDER="global-keyboard-event-binder",e.VIEWER_BINDER="pdf-viewer-keyboard-event-binder",e.ANNOTATION_PROPERTIES_BINDER="annotation-properties-keyboard-event-binder",e.ACTIVATION_ANNOTATION_BINDER="activation-annotation-keyboard-event-binder",e.DOCUMENT_PROPERTIES_BINDER="document-properties-keyboard-event-binder",e.FOCUS_ELEMENT_BINDER="focus-element-keyboard-event-binder",e.EDIT_TEXT_OBJECT_BINDER="focus-text-object-event-binder",e.ANNOTATION_CREATING_BINDER="create-annotation-keyboard-event-binder",e.CUSTOM_COMMAND="custom-command",e.CUSTOM_BINDER="custom-keyboard-event-binder"},function(t,n){t.exports=e},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={textObjectActive:"text-object-active",textObjectUnActive:"text-object-unactive",addTextObjectParamTransfer:"add-text-object-param-transfer"}},function(t,e,n){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var o=function(){var t=navigator.appVersion.match(/iphone/gi),e="undefined"!=typeof devicePixelRatio?devicePixelRatio:1;return t&&(e=Math.min(2,e)),e}();var i=void 0,a=void 0,c=void 0;function s(){return i||(i=function(){if("undefined"!=typeof screen&&screen.deviceXDPI)return{x:screen.deviceXDPI,y:screen.deviceYDPI};if("undefined"!=typeof document){var t=document.createElement("div");t.style.cssText="width:1in;height:1in;position:absolute;top:20in;border:none;padding:0;",document.body.appendChild(t);var e={x:parseInt(t.offsetWidth),y:parseInt(t.offsetHeight)};return t.parentNode.removeChild(t),e}return{x:96,y:96}}()),i}var u=void 0;e.getDPI=s,e.getPtPxRatio=function(){if(void 0===a){var t=s();a=t.x/72}return a},e.getPxPtRatio=function(){if(void 0===c){var t=s();c=72/t.x}return c},e.dpr=o,e.copyText=function(t){var e=u||((u=document.createElement("input")).type="text",u.style.opacity="0",u.style.top="-999px",u.style["z-index"]=-1,u.style.position="absolute",document.body.appendChild(u),u);e.value=t,e.select(),e.focus(),e.setSelectionRange(0,e.value.length);var n=document.execCommand("copy",!1,e.value);return e.blur(),n},e.eventPath=function(t){var e=t.composedPath&&t.composedPath()||t.path,n=t.target;return null!=e?e.indexOf(window)<0?e.concat(window):e:n===window?[window]:[n].concat(function t(e,n){n=n||[];var r=e.parentNode;return r?t(r,n.concat(r)):n}(n),window)},e.isIE10=function(){var t=navigator.userAgent.toLowerCase(),e=void 0;return!(!("ActiveXObject"in self)||!(e=t.match(/msie ([\d\.]+)/)))&&10===parseInt(e[1])},e.getCanvasPixelRatio=function(){if("object"!==("undefined"==typeof window?"undefined":r(window)))return 1;var t=window.devicePixelRatio||1,e=document.createElement("canvas").getContext("2d");return t/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(r(this,t),e instanceof t){var s=e;e=s.a,n=s.b,o=s.c,i=s.d,a=s.e,c=s.f}else if(e instanceof Array){var u=e;e=u[0],n=u[1],o=u[2],i=u[3],a=u[4],c=u[5]}this.a=e,this.b=n,this.c=o,this.d=i,this.e=a,this.f=c}return t.Concat2mt=function(e,n){return new t(e.a*n.a+e.b*n.c,e.a*n.b+e.b*n.d,e.c*n.a+e.d*n.c,e.c*n.b+e.d*n.d,e.e*n.a+e.f*n.c+n.e,e.e*n.b+e.f*n.d+n.f)},t.prototype.set=function(t,e,n,r,o,i){this.a=t,this.b=e,this.c=n,this.d=r,this.e=o,this.f=i},t.prototype.reset=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0},t.prototype.reverse=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,n=e.a*e.d-e.b*e.c;if(0==n)return e;var r=-n,o=e.d/n,i=e.b/r,a=e.c/r,c=e.a/n,s=(e.c*e.f-e.d*e.e)/n,u=(e.a*e.f-e.b*e.e)/r;return new t(o,i,a,c,s,u)},t.prototype.setReverse=function(t){var e=this.reverse(t);this.set(e.a,e.b,e.c,e.d,e.e,e.f)},t.prototype.rotate=function(e,n){var r=Math.cos(e),o=Math.sin(e),i=new t(r,o,-o,r,0,0),a=void 0;a=n?t.Concat2mt(i,this):t.Concat2mt(this,i),this.set(a.a,a.b,a.c,a.d,a.e,a.f)},t.prototype.rotateAt=function(t,e,n,r){this.translate(t,e,r),this.rotate(n,r),this.translate(-t,-e,r)},t.prototype.translate=function(t,e,n){n?(this.e+=t*this.a+e*this.c,this.f+=e*this.d+t*this.b):(this.e+=t,this.f+=e)},t.prototype.concat=function(e,n,r,o,i,a,c){var s=void 0;e instanceof t?(s=e,c=n):s=new t(e,n,r,o,i,a);var u=void 0;u=c?t.Concat2mt(s,this):t.Concat2mt(this,s),this.set(u.a,u.b,u.c,u.d,u.e,u.f)},t.prototype.is90Rotated=function(){var t=1e3*this.a;t<0&&(t*=-1);var e=1e3*this.d;e<0&&(e*=-1);var n=this.b;n<0&&(n*=-1);var r=this.c;return r<0&&(r*=-1),t<n&&e<r},t.prototype.isScaled=function(){var t=1e3*this.b;t<0&&(t*=-1);var e=1e3*this.c;e<0&&(e*=-1);var n=this.a;n<0&&(n*=-1);var r=this.d;return r<0&&(r*=-1),t<n&&e<r},t.prototype.getA=function(){return this.a},t.prototype.getB=function(){return this.b},t.prototype.getC=function(){return this.c},t.prototype.getD=function(){return this.d},t.prototype.getE=function(){return this.e},t.prototype.getF=function(){return this.f},t.prototype.scale=function(t,e,n){this.a*=t,this.d*=e,n?(this.b*=t,this.c*=e):(this.b*=e,this.c*=t,this.e*=t,this.f*=e)},t.prototype.transformXDistance=function(t){var e=this.a*t,n=this.b*t;return Math.sqrt(e*e+n*n)},t.prototype.transformYDistance=function(t){var e=this.c*t,n=this.d*t;return Math.sqrt(e*e+n*n)},t.prototype.transformDistance=function(t,e){var n=this.a*t+this.c*e,r=this.b*t+this.d*e;return Math.sqrt(n*n+r*r)},t.prototype.transformPoint=function(t,e){return[this.a*t+this.c*e+this.e,this.b*t+this.d*e+this.f]},t.prototype.transformRect=function(t,e,n,r){for(var o=[t,t,n,n],i=[e,r,e,r],a=void 0,c=0;c<4;c++)a=this.transformPoint(o[c],i[c]),o[c]=a[0],i[c]=a[1];for(var s=[o[0],o[0],i[0],i[0]],u=1;u<4;u++)s[0]>o[u]&&(s[0]=o[u]),s[1]<o[u]&&(s[1]=o[u]),s[2]>i[u]&&(s[2]=i[u]),s[3]<i[u]&&(s[3]=i[u]);return[s[0],s[2],s[1],s[3]]},t.prototype.getXUnit=function(){var t=this.a,e=this.b;return 0===e?Math.abs(t):0===t?Math.abs(e):Math.sqrt(t*t+e*e)},t.prototype.getYUnit=function(){var t=this.c,e=this.d;return 0===t?Math.abs(e):0===e?Math.abs(t):Math.sqrt(t*t+e*e)},t.prototype.getUnitRect=function(){return this.transformRect(0,0,1,1)},t.prototype.matchRect=function(t,e){var n=e[0]-e[2];this.a=Math.abs(n)<.001?1:(t[0]-t[2])/n,n=e[3]-e[1],this.d=Math.abs(n)<.001?1:(t[3]-t[1])/n,this.e=t[0]-e[0]*this.a,this.f=t[3]-e[3]*this.d,this.b=0,this.c=0},t.prototype.getAngle=function(){return Math.atan2(this.b,this.a)},t.prototype.toArray=function(){return[this.a,this.b,this.c,this.d,this.e,this.f]},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.convertFromNumberToHex=function(t){if("number"!=typeof t)throw new TypeError("Unexpected color value:"+t);if(t<0)return-1;var e=t.toString(16),n=6;t>16777215&&(n=8);for(;e.length<n;)e="0"+e;return"#"+e},e.convertFromNumberToRGBA=function(t){var e=void 0;t<16777216?e=255:(e=t/o&255,t&=16777215);return{r:t>>16&255,g:t>>8&255,b:255&t,a:e}},e.colorConvertor=i,e.standardColorAsARGBNumber=function(t){if(t<=16777215)return 4278190080+t;if(t>16777215)return t;if("string"==typeof t){if((t=t.replace("#","").trim()).match(/^[0-9A-F]{8}$/i))return parseInt(t,16);if(t.match(/^[0-9A-F]{6}$/i))return 4278190080+parseInt(t,16);if(t.match(/^rgb\(\d{1,3}(,\d{1,3}){2}\)$/i)){var e=t.split(/\D+/).map((function(t){return parseInt(t)})),n=r(e,4),o=n[1],i=n[2],a=n[3];return 4278190080+(o<<16)+(i<<8)+a}if(t.match(/^rgba\(\d{1,3}(,\d{1,3}){3}\)$/i)){var c=t.split(/\D+/).map((function(t){return parseInt(t)})),s=r(c,5),u=s[1],f=s[2],p=s[3],d=s[4];return Math.floor(4278190080*d)+(u<<16)+(f<<8)+p}}throw new Error('incorrect color format: "'+t+'"')},e.convertFromNumberToJSColor=function(t){return["RGB",((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255]},e.getTransparentOrColor=function(t){var e=void 0;e=0===t?"transparent":i(16777215&t,"#");return e};var o=Math.pow(2,24);function i(t){var e,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HTML",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a="",c=void 0;switch("number"==typeof t&&(t=["int",t]),t[0]){case"int":e=(16711680&t[1])>>16,n=(65280&t[1])>>8,r=255&t[1];break;case"T":e=0,n=0,r=0,i=0;break;case"G":e=n=r=255*t[1];break;case"RGB":e=255*t[1],n=255*t[2],r=255*t[3];break;case"CMYK":e=(1-t[4])*(1-t[1])*255,n=(1-t[4])*(1-t[2])*255,r=(1-t[4])*(1-t[3])*255;break;case"r":e=+(c=t.match(/rgba?\((\d*),\s*(\d*),\s*(\d*),?\s*([\.0-9]*)?\)/))[1],n=+c[2],r=+c[3];break;case"#":var s=4==t.length?/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/:/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;c=t.match(s),e=parseInt(c[1],16),n=parseInt(c[2],16),r=parseInt(c[3],16);break;default:throw new Error("Unsupported color format")}switch(o){case"HTML":a=e===n&&n===r&&-1===r?"transparent":"rgba("+parseInt(e)+","+parseInt(n)+","+parseInt(r)+","+i+")";break;case"RGB":a=["RGB",e/255,n/255,r/255];break;case"#":a+=e<16?"#0"+e.toString(16):"#"+e.toString(16),a+=n<16?"0"+n.toString(16):n.toString(16),a+=r<16?"0"+r.toString(16):r.toString(16);break;case"int":a=0,a|=(i*=255)<<24,a|=e<<16,a|=n<<8,a|=r,a>>>=0}return a}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(5));n(7);var o=n(12),i=s(n(36)),a=s(n(37)),c=s(n(38));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var d=function(t){function e(){return u(this,e),f(this,t.apply(this,arguments))}return p(e,t),e.getName=function(){return"edit-graphics"},e.getLoader=function(){return i.default},e.initOnLoad=function(){var t=r.modular.module("edit-graphics",[]);t.registerController(a.default),t.registerController(c.default),t.registerPreConfiguredComponent("contextmenu-item-properties",{template:'<contextmenu-item @controller="edit-graphics:ShowGraphicsObjectPropertiesController">ega:contextmenu.properties</contextmenu-item>'}),t.registerPreConfiguredComponent("contextmenu-item-delete",{template:'<contextmenu-item @controller="edit-graphics:DeleteGraphicsObjectController">ega:contextmenu.delete</contextmenu-item>'}),t.registerPreConfiguredComponent("image-contextmenu",{template:'\n            <contextmenu name="fv--image-graphics-object-contextmenu">\n                <edit-graphics:contextmenu-item-properties name="fv--contextmenu-item-image-graphics-object-properties"></edit-graphics:contextmenu-item-properties>\n                <edit-graphics:contextmenu-item-delete name="fv--contextmenu-item-image-graphics-object-delete"></edit-graphics:contextmenu-item-delete>\n            </contextmenu>\n            '})},e.prototype.init=function(e){t.prototype.init.call(this,e),e.getPDFViewer().then((function(t){new o.EditGraphicsAddon(t).init()}))},e}(r.UIXAddon);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditGraphicsAddonEvents=e.EditGraphicsAddon=void 0;var r=i(n(13)),o=i(n(6));function i(t){return t&&t.__esModule?t:{default:t}}e.EditGraphicsAddon=r.default,e.EditGraphicsAddonEvents=o.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(0));var r=f(n(14)),o=f(n(27)),i=f(n(28));n(7);var a=f(n(29)),c=f(n(32)),s=f(n(33)),u=f(n(34));function f(t){return t&&t.__esModule?t:{default:t}}var p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e,this.graphicsManager=new r.default}return t.prototype.init=function(){var t=(0,i.default)(this),e=(0,o.default)(this,2),n=(0,o.default)(this,3),r=(0,u.default)(this);a.default.setAddon(this),c.default.setAddon(this);var f=(0,s.default)(this),p=this.pdfViewer.getStateHandlerManager();p.register(t),p.register(e),p.register(n),p.register(r),p.register(a.default),p.register(f),p.register(c.default),this.pdfViewer.addDestroyHook((function(){a.default.setAddon(null),c.default.setAddon(null)}))},t.prototype.getGraphicsManager=function(){return this.graphicsManager},t}();e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n(1)),o=c(n(21)),i=c(n(23)),a=c(n(24));c(n(26));function c(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.matchRules=[]}return t.prototype.registerMatchRule=function(t){return this.matchRules.push(t),t},t.prototype.unRegisterMatchRule=function(t){var e=this.matchRules.indexOf(t);-1!==e&&this.matchRules.splice(e,1)},t.prototype.get=function(t){for(var e=this.matchRules,n=this.getDefault(t),r=e.length;r--;){var o=e[r];if("function"==typeof o){var i=o(t,n);if(i)return i}}return n},t.prototype.getDefault=function(t){switch(t.getType()){case 1:return o.default;case 2:return i.default;case 3:return a.default;default:return r.default}},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n(16)),o=n(8),i=s(n(17)),a=s(n(9)),c=n(18);function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.page=n,this.doc=n.doc,this.engine=r,this.info=e}return t.prototype.destroy=function(){this.page=null,this.doc=null,this.engine=null,this.info=null},t.prototype.getId=function(){return this.info.id},t.prototype.getPDFPage=function(){return this.page},t.prototype.getBitmap=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getPDFPage();return n.doc.api.getGraphicsObjectBitmap(n.getPDFDoc().getId(),n.getId(),this.getId(),t*(0,o.getPtPxRatio)(),e)},t.prototype.getRect=function(){return this.info.rect},t.prototype.setRect=function(t){var e=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=this.getPDFPage();this.info.rect=t;var o=arguments[1];return n.doc.api.setGraphicsObjectRect(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,o&&e.doc.engine.eventEmitter.emit(r.default.graphicsUpdated,n)}))},t.prototype.setMatrix=function(t){var e=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=this.getPDFPage();return this.info.matrix=t,n.doc.api.setGraphicsObjectMatrix(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,e.doc.engine.eventEmitter.emit(r.default.graphicsUpdated,n)}))},t.prototype.getMatrix=function(){var t=this.info.matrix;return new a.default(t.a,t.b,t.c,t.d,t.e,t.f)},t.prototype.getDeviceMatrix=function(){var t=this.getMatrix();t.translate(0,-this.getPDFPage().getHeight());var e=(0,c.pt2px)(1);return t.scale(e,-e),t},t.prototype.getType=function(){return this.info.type},t.prototype.getBorderDashes=function(){return f(this.getType()),this.info.graphState.dashes},t.prototype.getBorderStyle=function(){return f(this.getType()),this.info.graphState.dashes.length>0?1:0},t.prototype.setBorderStyle=function(t,e){var n=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");f(this.getType());var o=this.getPDFPage();return this.info.graphState.dashes=e,o.doc.api.setGraphicsObjectBorderStyle(o.getPDFDoc().getId(),o.getId(),this.getId(),t,e).then((function(t){n.info=t,n.doc.engine.eventEmitter.emit(r.default.graphicsUpdated,o)}))},t.prototype.getBorderWidth=function(){return f(this.getType()),this.info.graphState.lineWidth},t.prototype.setBorderWidth=function(t){var e=this;if(f(this.getType()),!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=this.getPDFPage();return this.info.graphState.lineWidth=t,n.doc.api.setGraphicsObjectBorderWidth(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.info=t,e.doc.engine.eventEmitter.emit(r.default.graphicsUpdated,n)}))},t.prototype.getBorderColor=function(){return f(this.getType()),this.info.strokeColor},t.prototype.setBorderColor=function(t){var e=this;if(f(this.getType()),!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=this.getPDFPage();return this.info.strokeColor=t,n.doc.api.setGraphicsObjectBorderColor(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.doc.engine.eventEmitter.emit(r.default.graphicsUpdated,n)}))},t.prototype.getFillColor=function(){return f(this.getType()),this.info.fillColor},t.prototype.setFillColor=function(t){var e=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");f(this.getType());var n=this.getPDFPage();return this.info.fillColor=t,n.doc.api.setGraphicsObjectFillColor(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((function(t){e.doc.engine.eventEmitter.emit(r.default.graphicsUpdated,n)}))},t.prototype.getOpacity=function(){return((4278190080&this.info.strokeColor)>>>0)/4278190080},t.prototype.setOpacity=function(t){var e=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=parseInt(255*t)<<24>>>0;this.info.strokeColor=16777215&this.info.strokeColor|n;var o=this.getPDFPage();return o.doc.api.setGraphicsObjectOpacity(o.getPDFDoc().getId(),o.getId(),this.getId(),t).then((function(t){e.doc.engine.eventEmitter.emit(r.default.graphicsUpdated,o)}))},t.prototype.remove=function(){if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");return this.getPDFPage().removeGraphicsObject(this)},t}();e.default=u;var f=function(t){if(1!=t&&2!=t&&5!=t)throw new Error("only text, path object are supported")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={annotationUpdated:"annotation-updated",annotationIDUpdated:"annotation-id-updated",annotationAppearanceUpdated:"annotation-appearance-updated",annotationReplyAdd:"annotation-reply-add",annotationReviewStateAnnotAdd:"annotation-review-state-annot-add",annotationMarkedStateAnnotAdd:"annotation-marked-state-annot-add",annotationStatesCleared:"annotation-states-cleared",annotationRemoved:"annotation-removed",annotationMovedPosition:"annotation-moved-position",annotationAdded:"annotation-add",annotationAdd:"annotation-add",moveAnnotsToPages:"moveAnnotsToPages",annotationImported:"annotation-imported",annotationImportedEx:"annotation-imported-ex",actionUpdated:"action-updated",actionAdd:"action-add",actionRemove:"action-remove",layerVisibleChange:"layer-visible-change",bookmarkAdded:"bookmark-added",bookmarkUpdated:"bookmark-updated",bookmarkRemoved:"bookmark-removed",stateAnnotNameUpdated:"state-annot-name-updated",pageInfoChange:"page-info-change",pageRotationChange:"page-rotation-change",imageAdded:"image-added",watermarkAdded:"watermark-added",graphicsUpdated:"graphics-updated",permissionChanged:"permission-changed",docPasswordChanged:"doc-password-changed",drmEncryptSuccess:"drm-encrypt-success",drmEncryptFailed:"drm-encrypt-failed",removePwdAndPerm:"remove-password-and-permission",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",insertPages:"import-pages",importPages:"import-pages",applyRedaction:"apply-redaction",removeReviewState:"remove-review-state",formValueChanged:"form-value-changed",metaDataChanged:"meta-data-changed",docModified:"doc-modified",flattened:"flattened",headerFooterUpdated:"headerFooterUpdated",headerFooterAdded:"headerFooterAdded"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={print:4,modify:8,extract:16,annotForm:32,fillForm:256,extractAccess:512,assemble:1024,printHigh:2048}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRotatedRect=e.getSmartScale=e.getWHByMatrix=e.pxDPRpt=e.ptDPRpx=e.multiDPR=e.px2pt=e.pt2px=void 0;var r,o=n(8),i=(n(19),n(39)),a=(r=i)&&r.__esModule?r:{default:r},c=n(3);var s=void 0;function u(t){return function(){if(!s){var t=(0,o.getDPI)();s=[t.x,t.y]}return s}()[t]}e.pt2px=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t*u(e)/72},e.px2pt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 72*t/u(e)},e.multiDPR=function(t){return t*o.dpr},e.ptDPRpx=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o.dpr*t*u(e)/72},e.pxDPRpt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t/o.dpr/u(e)*72},e.getWHByMatrix=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=new a.default(t,e,0).scale(n).rotateZ(r);return[Math.round(Math.abs(o.a)),Math.round(Math.abs(o.b))]},e.getSmartScale=function(t,e,n){return Math.min(Math.max(Math.ceil(4*t)/4,e),n)},e.getRotatedRect=function(t,e,n,r){switch((0,c.assertThat)((0,c.isValidRotationAngle)(r),"Illegal rotation value: "+r),r=(r%360+360)%360){case 0:return t;case 90:return{left:t.bottom,right:t.top,top:t.left,bottom:t.right};case 180:return{left:e-t.right,right:e-t.left,top:n-t.bottom,bottom:n-t.top};case 270:return{left:t.top,right:t.bottom,top:t.right,bottom:t.left}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pageMatrix=void 0;var r,o=n(9),i=(r=o)&&r.__esModule?r:{default:r};function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}e.pageMatrix=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=void 0;switch(r%360){case 0:o=[n,0,0,n,0,0];break;case 90:o=[0,n,-n,0,n*e,0];break;case 180:o=[-n,0,0,-1,n*t,n*e];break;case 270:o=[0,-n,n,0,0,n*t];break;default:throw new Error("Unsupported rotation value: "+r)}return new(Function.prototype.bind.apply(i.default,[null].concat(a(o))))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){throw new Error("Method not implemented")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=f(n(1)),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),a=f(n(6)),c=n(22),s=n(4),u=n(10);function f(t){return t&&t.__esModule?t:{default:t}}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var d=i.Deps.jQuery,l=i.shared.browser.getPtPxRatio,h=i.ViewerEvents.beforeZoomTo,v=i.ViewerEvents.renderPageSuccess,g=function(t){function e(n,r,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r,o))}return p(e,t),e.prototype.initUI=function(){var t=this,e=this.$handler=d('<div class="fwr__graphics-object-handler fwr__text-object-edit"\n        ></div>');this.pageRender.pageHandler.$handler.after(e),e.get(0).__graphics_object_component=this;this.shapeControl=new i.ShapeControl({prestart:function(){return t.onPrestart()},start:function(e,n,r){return t.onStartUpdateShape(e,n,r)},moving:function(e,n,r){var o=r.offsetX,i=r.offsetY;return t.onShapeMoving(e,n,o,i)},update:function(e,n){return t.onShapeUpdating(e,n)},rotate:function(e,n){return t.onRotate(e,n)},end:function(e,n,r,o){return t.onShapeUpdateEnd(e,n,r,o)},afterEnd:function(e){return t.onAfterShapeCtrlEnd(e)},resizable:!0,enableDiagonally:!0,enableFrame:!0,previewer:!0});return e.on("dblclick",(function(){t.unActive(),t.activeCharEdit()})),this.$handler},e.prototype.reActive=function(){},e.prototype.active=function(){var e=this;t.prototype.active.call(this),this.reActive=function(){e.unActive(),e.active()};var n=this.pageRender.pdfViewer.getEventEmitter();n.emit(a.default.textObjectActive,this),n.once(h,this.beforeZoomToBind=t.prototype.unActive.bind(this)),this.pageRedrawBind&&n.off(v,this.pageRedrawBind),n.on(v,this.pageRedrawBind=function(t){t.index===e.getModel().getPDFPage().getIndex()&&e.reActive()})},e.prototype.unActive=function(){this.dependences.pdfViewer._setSaveBefore(),t.prototype.unActive.call(this),this.unActiveCharEdit();var e=this.pageRender.pdfViewer.getEventEmitter();e.off(h,this.beforeZoomToBind),e.off(v,this.pageRedrawBind),e.emit(a.default.textObjectUnActive,this)},e.prototype.unActiveCharEdit=function(){this.$charEditContainer&&this.$charEditContainer.remove(),this.$charEditContainer=null,this.unswitchBinder&&this.unswitchBinder()},e.prototype.applyEdit=function(){var t=this;if(!this.eCharInput)return Promise.reject(new Error("text input box has not been initialized!"));var e=this.eCharInput.innerText;return"string"!=typeof e&&(e=this.eCharInput.textContent),this.isApplyEdit=!0,this.setTextChar(e).then((function(){t.unActive()})).finally((function(){t.isApplyEdit=!1}))},e.prototype.initCharEditContainer=function(){var t=this,e=d('<div class="fv__text-object-edit-char-container"><div class="fv__text-object-edit-char-mask-layer"></div><span class="fv__text-object-edit-char-input" contenteditable autofocus></span></div>');e.get(0).__graphics_object_component=this,this.pageRender.$handler.after(e);var n=e.find(".fv__text-object-edit-char-input"),r=n[0];return this.eCharInput=r,n.on("keydown",(function(e){e.shiftKey||13===e.keyCode&&(e.preventDefault(),t.applyEdit())})),e},e.prototype.activeCharEdit=function(t){var e=this,n=this.$charEditContainer=this.$charEditContainer||this.initCharEditContainer(),o=n.find(".fv__text-object-edit-char-mask-layer"),f=n.find(".fv__text-object-edit-char-input");this.dependences.pdfViewer._setSaveBefore((function(){return e.applyEdit()}));var p=this.graphicsObject,d=p.getRect(),g=this.pageRender,y=g.pdfViewer;return f.off("focus").on("focus",(function(){var t=y.keyboard.getBinder(s.EDIT_TEXT_OBJECT_BINDER);if(!(y.keyboard.activeBinders.indexOf(t)>-1)){var n=t.on(s.KEY_MAP_UNFOCUS_FROM_EDITTING_TEXT_OBJECT,(function(){var t=e.eCharInput.innerText;"string"!=typeof t&&(t=e.eCharInput.textContent),e.setTextChar(t).then((function(){e.unActive()}))})),r=y.switchKeyboardEventBinder(s.EDIT_TEXT_OBJECT_BINDER);e.unswitchBinder=function(){r(),n()},f.one("blur",(function(t){e.applyEdit()}))}})),Promise.all([g.getPDFPage(),g.getScale(),g.getRotation()]).then((function(t){var e=r(t,3),n=e[0],o=e[1],i=e[2];return[n.getDeviceRect(d,o,i),n,o,i]})).then((function(s){var f=r(s,4),d=f[0],g=f[1],y=f[2],m=f[3];n.css({left:d.left+"px",top:d.bottom+"px"});var b=n.find(".fv__text-object-edit-char-input"),_=b[0];o.css({width:d.right-d.left+"px",height:d.bottom-d.top+"px"});var w=p.info.textState.text;void 0===t&&(t=w,_.focus()),"string"==typeof _.innerText?_.innerText=w:_.textContent=w;var O=p.info.textState.size,P=p.getMatrix().toArray().slice(0,4);O*l()<12&&(O*=12,P[0]/=12,P[1]/=12,P[2]/=12,P[3]/=12),P[0]*=y,P[1]*=-y,P[2]*=-y,P[3]*=y;var E=new i.Matrix(P[0],P[1],P[2],P[3],0,0),C=g.getRotationAngle()+m;E.rotate(C/180*Math.PI);switch(p.info.textState.font.baseName){case"TimesNewRoman":"Times New Roman"}b.css({fontFamily:'"'+[p.info.textState.font.baseName,p.info.textState.font.familyName,p.info.textState.font.nameKey,p.info.textState.font.name,"FoxitPDFSDKForWeb"].join('","')+'"',fontSize:O+"pt",fontWeight:p.info.textState.font.isBold?700:400,fontStyle:p.info.textState.font.isItalic?"italic":"",transform:"matrix("+E.toArray().join(",")+")",color:(0,u.colorConvertor)(16777215&p.getFillColor(),"#")});var x=b.height(),j=b.width(),T=E.transformPoint(j,x),A=T[0],R=T[1],S=void 0,M=void 0;A>=0&&R>0?(S=-E.transformPoint(j,0)[1]-x,M=0):A<0&&R>=0?(S=-E.transformPoint(j,0)[1]-x,M=-E.transformPoint(0,j)[1]):A<=0&&R<0?(S=E.transformPoint(0,x)[1]-x,M=-A+E.transformPoint(0,x)[0]):A>0&&R<=0&&(S=-E.transformPoint(0,x)[1]-x,M=A-E.transformPoint(j,0)[0]),b.css({top:S+"px",left:M+"px",transformOrigin:"left "+x+"px",bottom:"auto"}),t!==w&&("string"==typeof _.innerText?_.innerText=t:_.textContent=t),(0,c.addFont)(p.info.textState.font.nameKey||p.info.textState.font.name,p.getWoff.bind(p)).catch((function(){})),e.reActive=function(t){e.unActive(),e.activeCharEdit(t)};var D=e.pageRender.pdfViewer.getEventEmitter();D.emit(a.default.textObjectActive,e),e.beforeZoomToBind&&D.off(h,e.beforeZoomToBind),e.pageRedrawBind&&D.off(v,e.pageRedrawBind),D.once(h,e.beforeZoomToBind=e.unActiveCharEdit.bind(e)),D.on(v,e.pageRedrawBind=function(n){n.index===e.getModel().getPDFPage().getIndex()&&(t="string"==typeof _.innerText?_.innerText:_.textContent,e.reActive(t))})}))},e.prototype.setTextChar=function(t){return this.graphicsObject.setText(t)},e.prototype.getContextMenuConfig=function(){},e.prototype.getTextChar=function(){if(this.$charEditContainer){var t=this.$charEditContainer.find(".fv__text-object-edit-char-input")[0],e=t.innerText;return"string"!=typeof e&&(e=t.textContent),e}return this.getModel().getText()},e.prototype.textCharSure=function(){if(!this.isApplyEdit&&this.$charEditContainer){var t=this.$charEditContainer.find(".fv__text-object-edit-char-input")[0],e=t.textContent;return"string"!=typeof e&&(e=t.innerText),this.getModel().setText(e)}return Promise.resolve()},e.prototype.remove=function(){t.prototype.remove.call(this),this.graphicsObject.remove(),this.dependences.pdfViewer.unActiveElement(this),this.destroy()},e}(o.default);e.default=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=void 0,o=void 0,i={};"function"==typeof FontFace?(e.addFont=r=function(t,e){return i[t]?i[t]:i[t]=new Promise((function(n,r){e().then((function(e){if(!e)return r(),void i[t];var o=new FontFace(t,e.buffer||e.url);o.load().then((function(){document.fonts.add(o),n(o)}),(function(){r(),delete i[t]}))}),(function(){r(),delete i[t]}))}))},e.removeFont=o=function(t){i[t]&&i[t].then((function(e){delete i[t],document.fonts.delete(e)}))}):(e.addFont=r=function(t,e){return i[t]?i[t]:i[t]=new Promise((function(n,r){e().then((function(e){return e?e.buffer?URL.createObjectURL(new Blob([e.buffer],"application/x-font-woff")):e.url:(r("woff is invalid"),void delete i[t])})).then((function(e){if(!e)return r();var o=document.createElement("style");o.innerHTML='@font-face{font-family:"'+t+'"; src:url("'+e+'");}',document.head.appendChild(o),n(o)}))}))},e.removeFont=o=function(t){i[t]&&i[t].then((function(e){delete i[t],e.parentNode.removeChild(e)}))}),e.addFont=r,e.removeFont=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),c=n(2),s=n(10);function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var f=a.Deps.jQuery,p=function(t){function e(n,r,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r,o))}return u(e,t),e.prototype.active=function(){t.prototype.active.call(this)},e.prototype.getPropertyOptions=function(){var t=this.graphicsObject,e=t.getBorderColor();e=this.graphicsObject.needStroke()?(0,s.colorConvertor)(e||4278190080,"#"):0;var n=t.getFillColor();0==t.getFillMode()&&(n=0);var r=t.getBorderWidth();return{color:e,borderTransparent:!0,opacity:t.getOpacity(),fillColor:n,borderWidth:r}},e.prototype.initUI=function(){var e=this;t.prototype.initUI.call(this),this.$tip=f('<div class="fwr__path-object-tip"></div>'),this.$tip.appendTo(this.$handler);var n=this.rectHammer=new Hammer.Manager(this.$handler[0],{recognizers:[[Hammer.Press]]});return this.$handler.on("mousemove",(function(t){e.$tip.hide()})),n.on("press",(function(t){if(!f(".fv__ui-mobile").length){var n=e.graphicsObject.getRect(),r=d(e.$handler.parent()[0],t),o={left:r.x+"px",top:r.y+20+"px"};r=e.pageRender.page.reverseDevicePoint([r.x,r.y],e.pageRender.getScale(),e.pageRender.getRotation()),e.$tip.show().css(o).html("object : x:"+n.left.toFixed(2)+",y:"+n.bottom.toFixed(2)+"<br/>mouse: x:"+r[0].toFixed(2)+",y:"+r[1].toFixed(2))}})),this.$handler},e.prototype.showPropertiesDialog=function(t){var e=this.dependences.pdfViewer.activePropertiesDialog;this.dependences.pdfViewer.activePropertiesDialog?(e.show(t),e.setViewerComponent(this),this.activePropertiesDialog=e):this.propertiesControl=new a.PropertiesControl(this)},e.prototype.getContextMenuComponentName=function(){return"fv--path-graphics-object-contextmenu"},e.prototype.getContextMenuConfig=function(){var t=this;return{selector:"div.fv__shape-control",items:{properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(e,n,r){t.showPropertiesDialog(r)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){t.remove()}}}}},e.prototype.unActive=function(e){var n=this.activePropertiesDialog;n&&n.viewerComponent===this&&n.hide(),t.prototype.unActive.call(this,e)},e.prototype.remove=function(){t.prototype.remove.call(this),this.graphicsObject.remove(),this.dependences.pdfViewer.unActiveElement(this),this.destroy()},e.prototype.destroy=function(){this.contextmenu&&this.contextmenu.destroy(),this.propertiesControl&&this.propertiesControl.close(),this.propertiesControl=null,this.rectHammer&&this.rectHammer.destroy(),t.prototype.destroy.call(this)},e}(i.default);e.default=p;var d=function(t,e){var n=t.getBoundingClientRect(),r=e.srcEvent,o=(0,c.getClientX)(r),i=(0,c.getClientY)(r);return{x:o-n.left-e.deltaX,y:i-n.top-e.deltaY}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),c=n(25);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var p=a.Deps.jQuery,d=a.Events,l=function(t){function e(){return s(this,e),u(this,t.apply(this,arguments))}return f(e,t),e.prototype._resize=function(e,n,r){e==c.DIR_NORTH||e==c.DIR_SOUTH||e==c.DIR_EAST||e==c.DIR_WEST?this.enableUniform=!1:this.enableUniform=!0,t.prototype._resize.call(this,e,n,r)},e}(a.ShapeControl),h=function(t){function e(n,r,o){return s(this,e),u(this,t.call(this,n,r,o))}return f(e,t),e.getDefaultContextMenuConfig=function(){return defaultContextMenuConfig},e.setContextMenuConfig=function(t){t},e.prototype.initUI=function(){var t=this,e=this,n=this.$handler=p('<div class="fwr__graphics-object-handler" \n        ></div>');return this.pageRender.pageHandler.$handler.append(n),n.get(0).__graphics_object_component=this,this.shapeControl=new l({prestart:function(){return t.onPrestart()},start:function(e,n,r){return t.onStartUpdateShape(e,n,r)},moving:function(e,n,r){var o=r.offsetX,i=r.offsetY;return t.onShapeMoving(e,n,o,i)},update:function(e,n){return t.onShapeUpdating(e,n)},beforeRotateStart:function(){return t.onBeforeRotateStart()},rotateEnd:function(e,n,r,o){return t.onRotate(e)},afterRotateEnd:function(){return t.onAfterRotateEnd()},rotateStart:function(){return t.onRotateStart()},end:function(e,n,r,o){return t.onShapeUpdateEnd(e,n,r,o)},afterEnd:function(e){return t.onAfterShapeCtrlEnd(e)},resizable:!0,rotatable:!0,enableDiagonally:!0,enableFrame:!0,enableUniform:!0,previewer:!0,enableSizeBox:!0}),this.dependences.pdfViewer.eventEmitter.on(d.zoomToSuccess,this.afterZoom=function(){e.updateShapeControl()}),this.$handler},e.prototype.onBeforeRotateStart=function(){var t=this;this.dependences.pdfViewer.getAllActiveElements().forEach((function(n){n!==t&&n instanceof e&&t.shapeControl.companion(n.shapeControl)}))},e.prototype.onAfterRotateEnd=function(){this.shapeControl.clearCompanions(),this.shapeControl.rotateDegree=0},e.prototype.onRotate=function(t){var e=this;return this.pageRender.$handler.get(0).classList.remove("fv__cursor-rotation"),this.graphicsObject.setRotation(t).then((function(t){e.updateShapeControl()}))},e.prototype.updateShapeControl=function(){t.prototype.updateShapeControl.call(this),this.shapeControl.ui.style.transform=""},e.prototype.onRotateStart=function(){this.pageRender.$handler.get(0).classList.add("fv__cursor-rotation")},e.prototype.getContextMenuConfig=function(){var t=this;return{selector:"div.fv__shape-control",items:{properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(e,n,r){t.showPropertiesDialog(r)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){var e=t.dependences.pdfViewer;if(e.getAllActiveElements().forEach((function(t){t.remove&&t.remove()})),0===e.getAllActiveElements().length){var n=e.getCurrentActivatable();n&&e.unActiveElement(n)}}}}}},e.prototype.getContextMenuComponentName=function(){return"fv--image-graphics-object-contextmenu"},e.prototype.getPropertyOptions=function(){return{opacity:this.graphicsObject.getOpacity(),borderStyle:!1}},e.prototype.showPropertiesDialog=function(t){var e=this.dependences.pdfViewer.activePropertiesDialog;this.dependences.pdfViewer.activePropertiesDialog?(e.show(t),e.setViewerComponent(this),this.activePropertiesDialog=e):this.$propertiesControl=new a.PropertiesControl(this)},e.prototype.hidePropertiesDialog=function(){this.$propertiesControl&&this.$propertiesControl.close()},e.prototype.destroy=function(){this.contextmenu&&this.contextmenu.destroy(),this.dependences.pdfViewer.eventEmitter.off(d.zoomToSuccess,this.afterZoom),t.prototype.destroy.call(this)},e.prototype.setOpacity=function(t){this.graphicsObject.setOpacity(t)},e.prototype.remove=function(){t.prototype.remove.call(this),this.graphicsObject.remove(),this.dependences.pdfViewer.unActiveElement(this),this.destroy()},e.prototype.unActive=function(e){var n=this.activePropertiesDialog;n&&n.viewerComponent===this&&n.hide(),t.prototype.unActive.call(this,e)},e}(i.default);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.DIR_NORTH="north",e.DIR_SOUTH="south",e.DIR_EAST="east",e.DIR_WEST="west",e.DIR_NORTH_WEST="north-west",e.DIR_NORTH_EAST="north-east",e.DIR_SOUTH_WEST="south-west",e.DIR_SOUTH_EAST="south-east"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(1);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var a=function(t){function e(n,r,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r,o))}return i(e,t),e.prototype.active=function(){},e.prototype.getContextMenuConfig=function(){},e}(((r=o)&&r.__esModule?r:{default:r}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.default=function(t,e){var n=t.graphicsManager,i=["","text","path","image","shading","all"][e],u=i?["fv__edit-",i,"-state-handler"].join(""):"";return u+=" fv__edit-graphics-state-handler",function(o){function f(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}(f,o),f.getStateName=function(){return"edit-"+i},f.prototype.pageHandler=function(o){var i=this;this.pageRender=o;var f=o.getPDFPage(),p=o.$handler,d=p[0];p.addClass(u);var l=this.hammer=new c(d);this.pdfViewer.addKeyboardShortcutEventListener(a.KEY_MAP_UNFOCUS_FROM_EDITTING_TEXT_OBJECT,(function(t){i.resetHandler()}),a.EDIT_TEXT_OBJECT_BINDER),l.on("tap",(function(a){if(-1!=a.target.className.indexOf("fv__shape-control-move-area"))return Promise.resolve();i.resetHandler();var c=s(d,a);f.then((function(t){return[t,t.reverseDevicePoint([c.x,c.y],o.getScale(),o.getRotation())]})).then((function(t){var n=r(t,2),o=n[0],i=r(n[1],2),a=i[0],c=i[1];return 5===e?o.getGraphicsObjectAtPoint([a,c],5,0):o.getGraphicsObjectAtPoint([a,c],3,e)})).then((function(t){return!t||t.type<1||t.type>3?Promise.reject():[n.get(t),t]})).then((function(e){var n=r(e,2);return new(0,n[0])(n[1],o,t)})).then((function(t){return i.currentComponent=t,t.active()})).catch((function(t){t&&console.error(t),i.currentComponent=null,i.pdfViewer.activeElement()}))}))},f.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(u),this.resetHandler()},f.prototype.out=function(){this.destroyPageHandler()},f.prototype.resetHandler=function(){this.currentComponent&&(this.currentComponent.textCharSure&&this.currentComponent.textCharSure(),this.currentComponent.unActive())},f}(o.IStateHandler)};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),i=n(2),a=n(4);var c=o.Deps.Hammer;var s=function(t,e){var n=t.getBoundingClientRect(),r=e.srcEvent,o=(0,i.getClientX)(r),a=(0,i.getClientY)(r);return{x:o-n.left-e.deltaX,y:a-n.top-e.deltaY}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.default=function(t){var e=t.graphicsManager,n="text",a=n?["fv__edit-",n,"-state-handler"].join(""):"";return a+=" fv__edit-graphics-state-handler",function(o){function c(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}(c,o),c.getStateName=function(){return"edit-"+n},c.prototype.pageHandler=function(n){var o=this;this.pageRender=n;var c=n.$handler,s=c[0];c.addClass(a);var u=this.hammer=new i.Manager(s,{recognizers:[[i.Pan,{direction:i.DIRECTION_ALL}]]});u.add(new i.Tap({event:"doubletap",taps:2})),u.add(new i.Tap({event:"singletap"})),u.get("doubletap").recognizeWith("singletap"),u.get("singletap").requireFailure("doubletap"),u.on("singletap",(function(i){o.resetHandler();var a=i.changedPointers[0];n.getPDFPage().then((function(t){return[t,t.reverseDevicePoint([a.offsetX,a.offsetY],n.getScale(),n.getRotation())]})).then((function(t){var e=r(t,2),n=e[0],o=r(e[1],2),i=o[0],a=o[1];return n.getGraphicsObjectAtPoint([i,a],3,1)})).then((function(t){return t?[e.get(t),t]:Promise.reject(new Error("Text object not found at this position: ["+a.offsetX+", "+a.offsetY+"]"))})).then((function(e){var o=r(e,2);return new(0,o[0])(o[1],n,t)})).then((function(t){return o.currentComponet=t,t.active()})).catch((function(t){t&&console.error(t),o.currentComponet=null,o.pdfViewer.activeElement()}))})),u.on("doubletap",(function(i){o.resetHandler();var a=i.changedPointers[0];n.getPDFPage().then((function(t){return[t,t.reverseDevicePoint([a.offsetX,a.offsetY],n.getScale(),n.getRotation())]})).then((function(t){var e=r(t,2),n=e[0],o=r(e[1],2),i=o[0],a=o[1];return n.getGraphicsObjectAtPoint([i,a],3,1)})).then((function(t){return t?[e.get(t),t]:Promise.reject(new Error("Text object not found at this position: ["+a.offsetX+", "+a.offsetY+"]"))})).then((function(e){var o=r(e,2);return new(0,o[0])(o[1],n,t)})).then((function(t){return o.currentComponet=t,t.activeCharEdit()})).catch((function(t){t&&console.error(t),o.currentComponet=null,o.pdfViewer.activeElement()}))}))},c.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(a),this.resetHandler()},c.prototype.out=function(){this.destroyPageHandler()},c.prototype.resetHandler=function(){this.currentComponet&&(this.currentComponet.textCharSure&&this.currentComponet.textCharSure(),this.currentComponet.unActive())},c}(o.IStateHandler)};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));var i=o.Deps.Hammer},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),a=n(30),c=(r=a)&&r.__esModule?r:{default:r},s=n(31),u=n(2);function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var p=i.Deps.Hammer,d=null,l=0,h=i.IStateHandler,v=!1,g=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.destroyHooks=[],r}return f(e,t),e.prototype.addDestroyHook=function(){var t;(t=this.destroyHooks).push.apply(t,arguments)},e.prototype.addEventTo=function(t,e,n){return t.on(e,n),function(){t.off(e,n)}},e.setAddon=function(t){d=t},e.getStateName=function(){return"add-path-object"},e.setPathType=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;l=t},e.prototype.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass("fv__create-callout-state-handler "+this.cursorStyle),this.shapeDom=(0,s.getShapeDom)(n);var r=n[0],i=this.hammer=new p.Manager(r,{recognizers:[[p.Pan,{direction:p.DIRECTION_ALL}]]}),a=void 0,u=void 0,f=function(t){v=-1!=t.target.className.indexOf("fv__pdf-page-handler-container")};this.addDestroyHook(this.addEventTo(n,"mousedown",f),this.addEventTo(n,"touchstart",f),(function(){i.destroy()})),i.on("panstart",(function(t){v&&(a=y(r,t))})).on("panend",(function(n){if(a){u={x:a.x+n.deltaX,y:a.y+n.deltaY};var r=e.pageRender.page.reverseDevicePoint([a.x,a.y],e.pageRender.getScale(),e.pageRender.getRotation()),i=e.pageRender.page.reverseDevicePoint([u.x,u.y],e.pageRender.getScale(),e.pageRender.getRotation()),s={x:r[0],y:r[1]},f={x:i[0],y:i[1]},p=c.default.generatePoints(s,f,l),h=c.default.pointsToRect(s,f);e.pageRender.page.addGraphicsObject({type:2,points:p,rect:h}).then((function(t){return a=null,e.shapeDom.hide(),t})).then((function(t){return t?[d.graphicsManager.get(t),t]:Promise.reject(new Error("Graphics object was not created!"))})).then((function(e){var n=o(e,2);return new(0,n[0])(n[1],t,d)})).then((function(t){return e.currentComponet=t,t.active()})).catch((function(t){throw e.currentComponet=null,e.pdfViewer.activeElement(),t}))}})).on("panmove",(function(t){if(a){u={x:a.x+t.deltaX,y:a.y+t.deltaY};var n=c.default.pointsToRect(a,u,!0),r=c.default.generatePoints(a,u,l);(0,s.drawShape)(r,n,e.shapeDom)}}))},e.prototype.destroyPageHandler=function(){this.destroyHooks.forEach((function(t){return t()})),this.resetHandler()},e.prototype.out=function(){this.destroyPageHandler()},e.prototype.resetHandler=function(){this.currentComponet&&this.currentComponet.destroy()},e}(h);e.default=g;var y=function(t,e){var n=t.getBoundingClientRect(),r=e.srcEvent,o=(0,u.getClientX)(r),i=(0,u.getClientY)(r);return{x:o-n.left-e.deltaX,y:i-n.top-e.deltaY}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.pointsToRect=function(t,e,n){var r=t.x>e.x?e.x:t.x,o=t.x<e.x?e.x:t.x,i=t.y>e.y?e.y:t.y,a=t.y<e.y?e.y:t.y;if(n){var c=i;(i=a)-(a=c)<1&&(i=a+1,a-=1)}else a-i<1&&(a=i+1,i-=1);return o-r<1&&(o=r+1,r-=1),{left:r-2,top:a+1,right:o+2,bottom:i-1}},t.generatePoints=function(e,n,r){var o=e.x,i=e.y,a=n.x-o,c=n.y-i;switch(r){case"line":return t.genLinePoints(o,i,a,c);case"square":return t.genSquarePoints(o,i,a,c);case"circle":return t.genOvalPoints(o,i,a,c);case"roundRect":return t.genRoundRectPoints(o,i,a,c)}},t.genLinePoints=function(t,e,n,r){var o=[];return o.push(["m",t,e]),o.push(["l",t+n,e+r]),o},t.genOvalPoints=function(t,e,n,r){var i=[];return i.push(["m",t+n/2,e]),(i=(i=(i=(i=i.concat(o(t+n/2,e,n/2,r/2,1))).concat(o(t+n,e+r/2,-n/2,r/2,0))).concat(o(t+n/2,e+r,-n/2,-r/2,1))).concat(o(t,e+r/2,n/2,-r/2,0))).push(["h",i[0][1],i[0][2]]),i},t.genRoundRectPoints=function(t,e,n,r){var i=[],a=.2*n,c=.2*r,s=.8*n,u=.8*r;return i.push(["m",t+a,e]),i.push(["l",t+s,e]),(i=i.concat(o(t+s,e,a,c,1))).push(["l",t+n,e+u]),(i=i.concat(o(t+n,e+u,-a,c,0))).push(["l",t+a,e+r]),(i=i.concat(o(t+a,e+r,-a,-c,1))).push(["l",t,e+c]),(i=i.concat(o(t,e+c,a,-c,0))).push(["l",i[0][1],i[0][2]]),i.push(["h"]),i},t.genSquarePoints=function(t,e,n,r){var o=[];return o.push(["m",t,e]),o.push(["l",t+n,e]),o.push(["l",t+n,e+r]),o.push(["l",t,e+r]),o.push(["h",t,e]),o},t}();function o(t,e,n,r,o){var i=[],a=.5522847498308;return o?(i.push(["c",t+a*n,e]),i.push(["c",t+n,e+a*r]),i.push(["c",t+n,e+r])):(i.push(["c",t,e+a*r]),i.push(["c",t+a*n,e+r]),i.push(["c",t+n,e+r])),i}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.drawShape=e.getShapeDom=void 0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)).Deps.jQuery;e.getShapeDom=function(t){var e=t.find(".fv__add-path-preview");return 0==e.length&&(e=r('<canvas class="fv__add-path-preview" style="position: absolute;display:none"></canvas>'),t.append(e)),e},e.drawShape=function(t,e,n){var r=n[0],o=r.getContext("2d");o.clearRect(0,0,n.width(),n.height()),r.width=e.right-e.left+4,r.height=e.bottom-e.top+4,o.clearRect(0,0,n.width(),n.height()),o.beginPath(),o.lineWidth=2,o.strokeStyle="#5aa",o.transform(1,0,0,1,2-e.left,2-e.top);for(var i=[],a=0;a<t.length;a++)switch(t[a][0]){case"m":o.moveTo(t[a][1],t[a][2]);break;case"l":o.lineTo(t[a][1],t[a][2]);break;case"c":i.push(t[a][1],t[a][2]),6===i.length&&(o.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]),i=[]);break;case"h":4===i.length?(o.bezierCurveTo(i[0],i[1],i[2],i[3],t[a][1],t[a][2]),i=[]):o.lineTo(t[a][1],t[a][2]),o.closePath()}o.stroke(),n.css({left:e.left,top:e.top}).show()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),o=n(2);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var a=r.Deps.jQuery,c=r.IStateHandler,s=r.Events,u=null,f=function(t){function e(n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n))}return i(e,t),e.setAddon=function(t){u=t},e.getStateName=function(){return"add-image-object"},e.prototype.pageHandler=function(t){var e=this,n=this;this.pageRender=t;var r=this.$handler=t.$handler,o=r[0],i=this.hammer=new Hammer.Manager(o,{recognizers:[[Hammer.Tap],[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]}),c=void 0,f=void 0;function d(){return f||(f=a('<img style="position: absolute;top:200%;left:0;border:2px solid transparent;" src="'+c+'"/>'),r.append(f),f)}this.pdfViewer.eventEmitter.on(s.addEditImage,this.loadFile=function(t){c=t}),r.off("mouseenter").on("mouseenter",(function(t){c&&d().show()})),r.off("mousemove mousewheel").on("mousemove mousewheel",(function(t){if(c){var e=o.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top;d().css({top:r,left:n})}})),r.off("mouseleave").on("mouseleave",(function(t){c&&d().hide()}));var l=!0;i.on("tap",(function(r){if(l&&(l=!1,c)){var i={},a=p(o,r),s=d(),f=s.width(),h=s.height();t.getPDFPage().then((function(r){var o,p=t.getRotation(),d=3*f/r.getPxWidth(),v=3*h/r.getPxHeight();if(d>1||v>1){var g=Math.max(d,v);g>1&&(g=1/g),f*=g,h*=g}if(90===p||270===p){var y=f;f=h,h=y}i.top=a.y,i.left=a.x,i.right=i.left+f,i.bottom=i.top+h,(o=c,new Promise((function(t,e){var n=new XMLHttpRequest;n.open("GET",o),n.responseType="arraybuffer",n.onreadystatechange=function(){4===n.readyState&&(n.status>=200&&n.status<300||304===n.status?t(n.response):e())},n.onerror=function(){e()},n.send()}))).then((function(o){var a=r.reverseDeviceRect(i,t.getScale(),p);r.addImage(o,a,p).then((function(n){var r=new(u.graphicsManager.get(n))(n,t,u);e.pdfViewer.getStateHandlerManager().switchTo("edit-all"),e.currentComponet=r,s.remove(),l=!0,r.active()})).catch((function(t){t&&console.error(t),n.currentComponet=null,n.pdfViewer.activeElement()}))}))}))}}))},e.prototype.destroyPageHandler=function(){this.$handler.off("mousemove mousewheel mouseleave"),this.$handler.empty(),this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.pdfViewer.eventEmitter.off(s.addEditImage,this.loadFile)},e.prototype.out=function(){this.destroyPageHandler()},e}(c);e.default=f;var p=function(t,e){var n=t.getBoundingClientRect(),r=e.srcEvent,i=(0,o.getClientX)(r),a=(0,o.getClientY)(r);return{x:i-n.left-e.deltaX,y:a-n.top-e.deltaY}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.default=function(t){var e=t.graphicsManager;return function(n){function o(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}(o,n),o.getStateName=function(){return"add-text-object"},o.prototype.pageHandler=function(n){var o=this;this.pageRender=n;var a=n.getPDFPage(),f=n.$handler,p=f[0];f.addClass(s),(this.hammer=new u(p)).on("tap",(function(c){o.resetHandler();var s=c.changedPointers[0];a.then((function(t){return[t,t.reverseDevicePoint([s.offsetX,s.offsetY],n.getScale(),n.getRotation())]})).then((function(t){var e=r(t,2),a=e[0],c=r(e[1],2),s=c[0],u=c[1],f=a.getRotationAngle(),p=new i.Matrix;return p.rotate((f+n.getRotation())/180*Math.PI),p.translate(s,u),a.addGraphicsObject(Object.assign({},o.addParams,{originPosition:{x:s,y:u}},{type:1,matrix:p.toArray()}))})).then((function(t){return t?[e.get(t),t]:Promise.reject(new Error("Graphics object was not created!"))})).then((function(e){var o=r(e,2);return new(0,o[0])(o[1],n,t)})).then((function(t){return o.currentComponet=t,t.activeCharEdit()})).catch((function(t){t&&console.error(t),o.currentComponet=null,o.pdfViewer.activeElement()}))})),this.pdfViewer.getEventEmitter().on(c.default.addTextObjectParamTransfer,this.addTextObjectParamTransferBind=function(t){o.addParams=t})},o.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(s),this.addParams=null,this.pdfViewer.getEventEmitter().off(c.default.addTextObjectParamTransfer,this.addTextObjectParamTransferBind),this.resetHandler()},o.prototype.out=function(){this.destroyPageHandler()},o.prototype.resetHandler=function(){this.currentComponet&&(this.currentComponet.textCharSure&&this.currentComponet.textCharSure(),this.currentComponet.unActive())},o}(i.IStateHandler)};var o,i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),a=n(6),c=(o=a)&&o.__esModule?o:{default:o};var s="fv__add-text-object-state-handler",u=i.Deps.Hammer},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.default=function(t){var e=t.graphicsManager,n="fv__edit-all-state-handler fv__edit-graphics-state-handler";return function(c){function y(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,c.call(this,t));return e.destroyHooks=[],e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}(y,c),y.getStateName=function(){return"edit-all"},y.prototype.pageHandler=function(c){var y=this,m=new l;this.pageRender=c;var b=c.getPDFPage(),_=c.$handler,w=_[0];_.addClass(n);var O=new v;this.selections=new s({anchorElement:w,borderStyle:p.DOTTED}),this.selections.reducer(f(w)),this.selections.reducer((function(t){var e=w.getBoundingClientRect();return Object.assign({left:t.clientLeft-e.left,top:t.clientTop-e.top},t)})),this.selections.eventInterceptor((function(t){return t.target===w}));var P=!1;this.selections.eventInterceptor((function(t){return P}));var E=function(t){P=t.target===w};w.addEventListener("mousedown",E),w.addEventListener("touchstart",E),this.destroyHooks.push((function(){w.removeEventListener("mousedown",E),w.removeEventListener("touchstart",E)})),this.selections.on(u.END,(function(n){O.exec((function(){return b.then((function(r){var o=y.pageRender.scale,i=y.pageRender.getRotation(),s=r.reverseDeviceRect({left:n.left,right:n.left+n.width,top:n.top,bottom:n.top+n.height},o,i),u=Math.min(2/y.pageRender.scale,2);return r.getGraphicsObjectsInRect(s,u,a.GraphicsObjectType.ALL).then((function(n){!n||n.length<1||(x()||m.clear(),y.pdfViewer.activeElement(m),n.forEach((function(n){var r=new(e.get(n))(n,c,t);m.add(r),r.$handler.get(0).addEventListener("click",(function(t){0===t.button&&x()&&m.remove(r)}),!0)})))}))}))}))}));var C=this.hammer=new d(w);C.on("tap",(function(n){if(-1!=n.target.className.indexOf("fv__shape-control-move-area"))return Promise.resolve();y.resetHandler();var o,a,s,u,f,p=(o=n,a=w.getBoundingClientRect(),s=o.srcEvent,u=(0,i.getClientX)(s),f=(0,i.getClientY)(s),{x:u-a.left-o.deltaX,y:f-a.top-o.deltaY});b.then((function(t){return[t,t.reverseDevicePoint([p.x,p.y],c.getScale(),c.getRotation())]})).then((function(t){var e=r(t,2),n=e[0],o=r(e[1],2),i=o[0],a=o[1];return n.getGraphicsObjectAtPoint([i,a],5,0)})).then((function(t){return t?t.type<1||t.type>3?Promise.reject():[e.get(t),t]:Promise.reject(g)})).then((function(e){var n=r(e,2);return new(0,n[0])(n[1],c,t)})).then((function(t){y.currentComponent=t,x()||m.clear(),m.add(t),y.pdfViewer.activeElement(m),t.$handler.get(0).addEventListener("click",(function(e){0===e.button&&x()&&m.remove(t)}),!0)})).catch((function(t){t===g&&x()||(t!==g&&t&&console.error(t),y.currentComponent=null,y.pdfViewer.activeElement())}))})),this.destroyHooks.push((function(){return C.destroy()}),(function(){return y.selections.destroy()}),(function(){m.clear(),y.pdfViewer.unActiveElement(m)}));var x=function(){return!!y.pdfViewer.isShortcutKeyEnabled()&&(o.DeviceInfo.isMac?h.isWin:h.isCtrl)}},y.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.destroyHooks.forEach((function(t){return t()})),this.pageRender.$handler.removeClass(n),this.resetHandler(),this.pageRender=null,this.destroyHooks=null},y.prototype.out=function(){this.destroyPageHandler()},y.prototype.resetHandler=function(){this.currentComponent&&this.currentComponent.textCharSure&&this.currentComponent.textCharSure()},y}(o.IStateHandler)};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),i=n(2),a=(n(4),n(35));var c=o.shared.areaSelections,s=c.Selections,u=c.SelectionEventType,f=c.createAreaLimitationReducer,p=c.BorderStyle,d=o.Deps.Hammer,l=o.shared.activation.ActivationGroup,h=o.shared.keyboardStatus,v=o.shared.QueuedAsyncTaskExecutor,g={}},function(t,e,n){"use strict";var r;n.r(e),n.d(e,"GraphicsObjectType",(function(){return r})),function(t){t[t.ALL=0]="ALL",t[t.TEXT=1]="TEXT",t[t.PATH=2]="PATH",t[t.IMAGE=3]="IMAGE",t[t.SHADING=4]="SHADING",t[t.FORM_X_OBJECT=5]="FORM_X_OBJECT"}(r||(r={}))},function(t,e){t.exports=null},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.getName=function(){return"ShowGraphicsObjectPropertiesController"},e.prototype.handle=function(t){var e=this.component.parent.getCurrentTarget();e.showPropertiesDialog&&e.showPropertiesDialog(t)},e}(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(5)).Controller);e.default=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){return r(this,e),o(this,t.apply(this,arguments))}return i(e,t),e.getName=function(){return"DeleteGraphicsObjectController"},e.prototype.handle=function(){var t=this.component.parent.getCurrentTarget();t.remove&&t.remove()},e}(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(5)).Controller);e.default=a},function(t,e,n){"use strict";n.r(e);var r=n(3);var o=function(){function t(t){Object(r.assertThat)(Array.isArray(t),"Illegal Matrix values, it should be an array! But actual: "+t),Object(r.assertThat)(16===t.length,"Incorrect matrix values size, it must be 16!"),this.values=t,this.cols=Math.sqrt(t.length)}return t.prototype.multiVec4=function(t,e,n,r){return void 0===r&&(r=1),[this.getAt(0,0)*t+this.getAt(0,1)*e+this.getAt(0,2)*n+this.getAt(0,3)*r,this.getAt(1,0)*t+this.getAt(1,1)*e+this.getAt(1,2)*n+this.getAt(1,3)*r,this.getAt(2,0)*t+this.getAt(2,1)*e+this.getAt(2,2)*n+this.getAt(2,3)*r,this.getAt(3,0)*t+this.getAt(3,1)*e+this.getAt(3,2)*n+this.getAt(3,3)*r]},t.prototype.getAt=function(t,e){var n=t*this.cols+e;return Object(r.assertThat)(n<this.values.length,"Cannot access value at ("+t+","+e+"), it out bound of this matrix!"),this.values[n]},t}(),i=function(){function t(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=1),this.a=t,this.b=e,this.c=n,this.d=r}return t.prototype.transform=function(e){var n=e.multiVec4(this.a,this.b,this.c,this.d);return new t(n[0],n[1],n[2],n[3])},t.prototype.scale=function(t,e,n){return void 0===e&&(e=t),void 0===n&&(n=e),this.transform(function(t,e,n){return void 0===e&&(e=t),void 0===n&&(n=e),new o([t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1])}(t,e,n))},t.prototype.rotateZ=function(t){return this.transform(function(t){void 0===t&&(t=0);var e=t/180*Math.PI,n=Math.cos(e),r=Math.sin(e);return new o([n,r,0,0,-r,n,0,0,0,0,1,0,0,0,0,1])}(t))},t.prototype.translate=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.transform(function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),new o([1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1])}(t,e,n))},t}();e.default=i}]).default}));