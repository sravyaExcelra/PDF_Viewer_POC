!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("UIExtension")):"function"==typeof define&&define.amd?define(["UIExtension"],e):"object"==typeof exports?exports.UndoRedoAddon=e(require("UIExtension")):t.UndoRedoAddon=e(t.UIExtension)}(self,(function(t){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(e,n){e.exports=t},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(18);Object.defineProperty(e,"MARKUP_ANNOTATION_STATE",{enumerable:!0,get:function(){return(t=o,t&&t.__esModule?t:{default:t}).default;var t}});e.BORDER_STYLE={SOLID:0,DASHED:1,UNDERLINE:2,BEVELED:3,INSET:4,CLOUDY:5},e.POINT_TYPE={MOVE_TO:1,LINE_TO:2,LINE_TO_CLOSE_FIGURE:3,BEZIER_TO:4,BEZIER_TO_CLOSE_FIGURE:5},e.Intents={LINE_ARROW:"LineArrow",LINE_DIMENSION:"LineDimension",POLYGON_CLOUD:"PolygonCloud",POLYGON_DIMENSION:"PolygonDimension",POLYLINE_DIMENSION:"PolyLineDimension",CIRCLE_DIMENSION:"CircleDimension",FREETEXT_TYPEWRITER:"FreeTextTypewriter",FREETEXT_CALLOUT:"FreeTextCallout",STRIKEOUT_TEXTEDIT:"StrikeOutTextEdit"};var r=e.LineEndingName={0:"None",1:"Square",2:"Circle",3:"Diamond",4:"OpenArrow",5:"ClosedArrow",6:"Butt",7:"ROpenArrow",8:"RClosedArrow",9:"Slash"};e.LineEndingStyle=Object.keys(r).reduce((function(t,e){return t[r[e]]=Number(e),t}),{}),e.LINE_CAPTION_POSITION={POS_INLINE:0,POS_TOP:1},e.AnnotFlagsName={0:"invisible",1:"hidden",2:"print",3:"nozoom",4:"norotate",5:"noview",6:"readonly",7:"locked",8:"togglenoview"},e.PDFDocPermission={PrintLowQuality:4,ModifyDocument:8,Extract:16,AnnotForm:32,FillForm:256,ExtractAccess:512,Assemble:1024,PrintHighQuality:2048},e.MeasureType={MeasureTypeX:0,MeasureTypeY:1,MeasureTypeD:2,MeasureTypeA:3,MeasureTypeT:4,MeasureTypeS:5},e.STORE_NAMES={SELECTION_INFO:"viewer--store-selection-info"},e.CREATING_MEASUREMENT_CONTEXTMENU="creating-measurement-contextmenu",e.HIGHLIGHTING_MODE={NONE:0,INVERT:1,OUTLINE:2,PUSH:3,TOGGLE:4},e.RESOLVED_PROMISE_VOID=Promise.resolve(),e.DISTANCE_TOLERANCE=2,e.POINT_TOLERANCE=.01},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=r.PDFViewCtrl.Deps.jQuery,c=r.UIEvents,f=function(){function t(e,n){u(this,t),this.pdfViewer=e,this.controller=n}return t.prototype.init=function(){var t=this.controller;this.pdfViewer.registerMatchRule((function(e,n){return function(e){function n(){return u(this,n),i(this,e.apply(this,arguments))}return a(n,e),n.prototype.setColor=function(n){var r=this,i=this.annot.getBorderColor();return e.prototype.setColor.call(this,n).then((function(e){var n=r.annot.getBorderColor();return t.create("annot",o.ANNOTATION.SETCOLOR,{annot:r.annot,oldColor:i,newColor:n}),e}))},n.prototype.setOpacity=function(n){var r=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i&&a&&t.create("annot",o.ANNOTATION.SETOPACITY,{annot:this.annot,oldOpacity:a.oldValue,newOpacity:a.commitValue});var u=this.annot.getOpacity();return e.prototype.setOpacity.call(this,n).then((function(e){var n=r.annot.getOpacity();return i&&!a&&t.create("annot",o.ANNOTATION.SETOPACITY,{annot:r.annot,oldOpacity:u,newOpacity:n}),e}))},n.prototype.setFillColor=function(n){var r=this,i=this.annot.getStyleFillColor||this.annot.getFillColor,a=i.call(this.annot);return e.prototype.setFillColor.call(this,n).then((function(e){var n=i.call(r.annot);return t.create("annot",o.ANNOTATION.SETFILLCOLOR,{annot:r.annot,oldFillColor:a,newFillColor:n}),e}))},n.prototype.setBorderWidth=function(n){var r=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i&&a&&t.create("annot",o.ANNOTATION.SETBORDERWIDTH,{annot:this.annot,oldBorderWidth:a.oldValue,newBorderWidth:a.commitValue});var u=this.annot.getBorderWidth();return e.prototype.setBorderWidth.call(this,n).then((function(e){var n=r.annot.getBorderWidth();return i&&!a&&t.create("annot",o.ANNOTATION.SETBORDERWIDTH,{annot:r.annot,oldBorderWidth:u,newBorderWidth:n}),e}))},n.prototype.setBorderStyle=function(n,r){var i=this,a=this.annot.getBorderStyleWithParam();return e.prototype.setBorderStyle.call(this,n,r).then((function(e){var n=i.annot.getBorderStyleWithParam();return t.create("annot",o.ANNOTATION.SETBORDERSTYLE,{annot:i.annot,oldBorderStyle:a,newBorderStyle:n}),e}))},n.prototype.setEndingStyle=function(n,r){var i=this,a=void 0,u=(a=n?this.annot.getStartStyle||this.annot.getCalloutLineEndingStyle:this.annot.getEndingStyle).call(this.annot);return e.prototype.setEndingStyle.call(this,n,r).then((function(e){var r=a.call(i.annot);return t.create("annot",o.ANNOTATION.SETENDINGSTYLE,{annot:i.annot,isStart:n,oldStyle:u,newStyle:r}),e}))},n.prototype.enableCaption=function(n){var r=this,i=this.annot.hasCaption();return e.prototype.enableCaption.call(this,n).then((function(e){var n=r.annot.hasCaption();return t.create("annot",o.ANNOTATION.ENABLECAPTION,{annot:r.annot,oldEnableCaption:i,newEnableCaption:n}),e}))},n.prototype.setRotation=function(n){var r=this,i=this.annot.getRotation(),a=this.annot.getRect();return e.prototype.setRotation.call(this,n).then((function(e){var n=r.annot.getRotation(),u=r.annot.getRect();return t.create("annot",o.ANNOTATION.SETROTATION,{annot:r.annot,oldRotation:i,newRotation:n,oldRect:a,newRect:u}),e}))},n.prototype.setHighlightingMode=function(n){var r=this,i=this.annot.getHighlightingMode();return e.prototype.setHighlightingMode.call(this,n).then((function(e){var n=r.annot.getHighlightingMode();return t.create("annot",o.ANNOTATION.SETHIGHLIGHTINGMODE,{annot:r.annot,oldHlMode:i,newHlMode:n}),e}))},n.prototype.removeAnnot=function(){var n=Object.assign({},this.annot),r=this.annot.getReplies&&this.annot.getReplies().slice(0);return e.prototype.removeAnnot.call(this).then((function(e){return"sound"===n.info.type||"widget"===n.info.type||t.create("annot",o.ANNOTATION.REMOVEANNOT,{annot:n,replies:r}),e}))},n.prototype.textBoundaryStart=function(){t.before("annot",o.ANNOTATION.UPDATEQUADPOINTSBYCHARINDEX,{annot:this.annot,oldStart:this.annot.getStartCharIndex(),oldEnd:this.annot.getEndCharIndex()})},n.prototype.textBoundaryEnd=function(){t.after("annot",o.ANNOTATION.UPDATEQUADPOINTSBYCHARINDEX,{annot:this.annot,newStart:this.annot.getStartCharIndex(),newEnd:this.annot.getEndCharIndex()})},n.prototype.onStartUpdateShape=function(n){return"resize"===n&&"freetext"===this.annot.getType()&&this.annot.getIntent&&"FreeTextCallout"===this.annot.getIntent()?t.before("annot",o.ANNOTATION.UPDATECALLOUTPOINTS,{annot:this.annot,oldRect:this.annot.getRect(),oldCalloutLinePoints:this.annot.getCalloutLinePoints(),oldInnerRect:this.annot.getInnerRect()}):t.before("annot",o.ANNOTATION.SETRECT,{annot:this.annot,oldRect:this.annot.getRect()}),e.prototype.onStartUpdateShape.apply(this,arguments)},n.prototype.onShapeUpdateEnd=function(n){var r=this,i=e.prototype.onShapeUpdateEnd.apply(this,arguments);return"resize"===n&&"freetext"===this.annot.getType()&&this.annot.getIntent&&"FreeTextCallout"===this.annot.getIntent()?i.then((function(){t.after("annot",o.ANNOTATION.UPDATECALLOUTPOINTS,{annot:r.annot,newRect:r.annot.getRect(),newCalloutLinePoints:r.annot.getCalloutLinePoints(),newInnerRect:r.annot.getInnerRect()})})):i.then((function(){t.after("annot",o.ANNOTATION.SETRECT,{annot:r.annot,newRect:r.annot.getRect()})}))},n.prototype.boundaryChangeStart=function(e){if("line"===this.annot.getType())switch(s(e.target).data("index")){case 0:case 1:t.before("annot",o.ANNOTATION.UPDATELINEPOINTS,{annot:this.annot,oldStartPoint:this.annot.getStartPoint(),oldEndPoint:this.annot.getEndPoint()});break;case 2:case 3:t.before("annot",o.ANNOTATION.SETLEADERLINELENGTH,{annot:this.annot,oldLeaderLinePoints:this.annot.getLeaderLinePoints(),oldStartPoint:this.annot.getStartPoint(),oldEndPoint:this.annot.getEndPoint()})}else t.before("annot",o.ANNOTATION.UPDATEVERTEXES,{annot:this.annot,oldVertexes:this.annot.getVertexes(),oldIndex:s(e.target).data("index")})},n.prototype.boundaryChangeEnd=function(e){var n=s(e.target).data("index")||s(e.target).parent().data("index");if("line"===this.annot.getType())switch(n){case 0:case 1:t.after("annot",o.ANNOTATION.UPDATELINEPOINTS,{annot:this.annot,newStartPoint:this.annot.getStartPoint(),newEndPoint:this.annot.getEndPoint()});break;case 2:case 3:t.after("annot",o.ANNOTATION.SETLEADERLINELENGTH,{annot:this.annot,newLeaderLinePoints:this.annot.getLeaderLinePoints(),newStartPoint:this.annot.getStartPoint(),newEndPoint:this.annot.getEndPoint()})}else t.after("annot",o.ANNOTATION.UPDATEVERTEXES,{annot:this.annot,newVertexes:this.annot.getVertexes(),newIndex:n})},n.prototype.setContent=function(n){var r=this,i=this.annot.getContent();return e.prototype.setContent.call(this,n).then((function(e){var n=r.annot.getContent();if(n!==i)if("freetext"===r.annot.getType()){var a=r.annot.getInnerRect(),u=r.annot.getRect(),s=r.annot.getCalloutLinePoints();t.create("annot",o.ANNOTATION.SETCONTENT,{annot:r.annot,oldContent:i,newContent:n,oldInnerRect:r.oldInnerRect,newInnerRect:a,oldRect:r.oldRect,newRect:u,oldCalloutLinePoints:r.oldCalloutLinePoints,newCalloutLinePoints:s})}else t.create("annot",o.ANNOTATION.SETCONTENT,{annot:r.annot,oldContent:i,newContent:n});return e}))},n.prototype.placeRedact=function(n){return e.prototype.placeRedact.call(this,n).then((function(e){var n=[];return e.map((function(t){var e=t[0];n.push(e)})),t.create("annot",o.ANNOTATION.PLACEREDACT,{redacts:n}),e}))},n.prototype.setDefaultAppearance=function(n,r){var i=this,a=this.annot.getDefaultAppearance();return e.prototype.setDefaultAppearance.call(this,n,r).then((function(e){var n=i.annot.getDefaultAppearance();t.create("annot",o.ANNOTATION.DEFAULTAP,{annot:i.annot,oldDA:a,newDA:n})}))},n}(n)})),this.bindEvent()},t.prototype.bindEvent=function(){var t=this.controller,e=this.pdfViewer;e.eventEmitter.on(c.addReplySuccess,(function(e,n){"sound"!==e.info.type&&t.create("annot",o.ANNOTATION.ADDREPLY,{annot:e,replyAnnot:n})})),e.eventEmitter.on(c.deleteReplySuccess,(function(e,n){t.create("annot",o.ANNOTATION.DELETEREPLY,{annot:e,replyAnnot:n})})),e.eventEmitter.on(c.addActionSuccess,(function(e){t.create("annot",o.ANNOTATION.ADDACTION,{annot:e})})),e.eventEmitter.on(c.eraserSuccess,(function(e,n){t.create("annot",o.ANNOTATION.ERASER,{beforeInks:e,afterInks:n})})),e.eventEmitter.on(c.addAnnotSuccess,(function(e){t.create("annot",o.ANNOTATION.ADDANNOT,{annot:e})})),e.eventEmitter.on(c.applyRedaction,(function(e){t.clear()})),e.eventEmitter.on(c.addContentSuccess,(function(e,n,r){t.create("annot",o.ANNOTATION.SETCONTENT,{annot:e,oldContent:n,newContent:r})})),e.eventEmitter.on(c.cancelAddAnnot,(function(){t.popUndoStack()})),e.eventEmitter.on("markRedactAnnotSuccess",(function(e){t.create("annot",o.ANNOTATION.MARKREDACTANNOT,{annot:e})})),e.eventEmitter.on("makeRedactByPagesSuccess",(function(e){t.create("annot",o.ANNOTATION.MAKEREDACTBYPAGES,{redacts:e})})),e.eventEmitter.on(c.markRedactionSuccess,(function(e){t.create("annot",o.ANNOTATION.MARKCHECKEDRESULTREDACTION,{redacts:e})})),e.eventEmitter.on(c.addReviewStateSuccess,(function(e,n){"sound"!==e.info.type&&t.create("annot",o.ANNOTATION.ADDREVIEWSTATE,{annot:e,stateName:n})})),e.eventEmitter.on(c.moveAnnotsToPages,(function(e,n,r){t.create("annot",o.ANNOTATION.moveAnnotsCrossPage,{srcPage:e,destPage:n,annots:r})}))},t}();e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ANNOTATION={SETCOLOR:"ANNOTATIONSETCOLOR",SETOPACITY:"ANNOTATIONSETOPACITY",SETFILLCOLOR:"ANNOTATIONSETFILLCOLOR",SETBORDERWIDTH:"ANNOTATIONSETBORDERWIDTH",SETBORDERSTYLE:"ANNOTATIONSETBORDERSTYLE",SETENDINGSTYLE:"ANNOTATIONSETENDINGSTYLE",ENABLECAPTION:"ANNOTATIONENABLECAPTION",SETROTATION:"ANNOTATIONSETROTATION",SETHIGHLIGHTINGMODE:"ANNOTATIONSETHIGHLIGHTINGMODE",REMOVEANNOT:"REMOVEANNOT",ADDANNOT:"ADDANNOT",SETRECT:"ANNOTATIONSETRECT",UPDATEQUADPOINTSBYCHARINDEX:"UPDATEQUADPOINTSBYCHARINDEX",UPDATECALLOUTPOINTS:"ANNOTATIONUPDATECALLOUTPOINTS",UPDATELINEPOINTS:"ANNOTATIONUPDATELINEPOINTS",SETLEADERLINELENGTH:"ANNOTATIONSETLEADERLINELENGTH",UPDATEVERTEXES:"ANNOTATIONUPDATEVERTEXES",SETCONTENT:"ANNOTATIONSETCONTENT",PLACEREDACT:"ANNOTATIONPLACEREDACT",ADDREPLY:"ANNOTATIONADDREPLY",DELETEREPLY:"ANNOTATIONDELETEREPLY",ADDACTION:"ANNOTATIONADDACTION",ERASER:"ANNOTATIONERASER",MARKREDACTANNOT:"ANNOTATIONMARKREDACTANNOT",MAKEREDACTBYPAGES:"ANNOTATIONMAKEREDACTBYPAGES",MARKCHECKEDRESULTREDACTION:"MARKCHECKEDRESULTREDACTION",ADDREVIEWSTATE:"ADDREVIEWSTATE",DEFAULTAP:"DEFAULTAP",moveAnnotsCrossPage:"moveAnnotsCrossPage"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t={};return t.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),i=n(6),a=n(20),u=(o=a)&&o.__esModule?o:{default:o};function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}var l=function(t){function e(){return s(this,e),c(this,t.apply(this,arguments))}return f(e,t),e.getName=function(){return"undo-redo"},e.getLoader=function(){return u.default},e.prototype.init=function(e){var n=this;t.prototype.init.call(this,e),e.getPDFViewer().then((function(t){(n.addon=new i.UndoRedoAddon(t)).init()}))},e.prototype.receiveAction=function(t,e){this.addon[t](e)},e}(r.UIXAddon);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UndoRedoAddon=void 0;var o,r=n(7),i=(o=r)&&o.__esModule?o:{default:o};e.UndoRedoAddon=i.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),r=u(n(8)),i=u(n(10)),a=u(n(2));function u(t){return t&&t.__esModule?t:{default:t}}var s=o.UIEvents,c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e}return t.prototype.init=function(){var t=this,e=this.undoRedoManager=new r.default(this.pdfViewer),n=this.controller=new i.default(this.pdfViewer,e);new a.default(this.pdfViewer,n).init();var o=this.pdfViewer.getKeyboardEventBinder("pdf-viewer-keyboard-event-binder");this.removeUndo=o.before("undo",(function(e){var n=e.nativeEvent.target;"true"!==n.contentEditable&&"TEXTAREA"!==n.tagName&&"INPUT"!==n.tagName&&(e.preventDefault(),t.undo())})),this.removeRedo=o.before("redo",(function(e){var n=e.nativeEvent.target;"true"!==n.contentEditable&&"TEXTAREA"!==n.tagName&&"INPUT"!==n.tagName&&(e.preventDefault(),t.redo())})),this.pdfViewer.eventEmitter.on(s.willCloseDocument,(function(){n.clear()}))},t.prototype.undo=function(){this.controller.undo()},t.prototype.redo=function(){this.controller.redo()},t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});r(n(2));var o=r(n(9));function r(t){return t&&t.__esModule?t:{default:t}}var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e,this.controller=n,this.undoStack=new o.default,this.redoStack=new o.default}return t.prototype.storage=function(t){this.undoStack.push(t)},t.prototype.undo=function(){var t=this.undoStack.pop();if(t)return this.redoStack.push(t),t},t.prototype.redo=function(){var t=this.redoStack.pop();if(t)return this.undoStack.push(t),t},t.prototype.removeById=function(t){this.undoStack.filter((function(e){return t!==e.uniqueId})),this.redoStack.filter((function(e){return t!==e.uniqueId}))},t.prototype.clear=function(){this.undoStack.clear(),this.redoStack.clear()},t.prototype.getUndoStack=function(){return this.undoStack},t.prototype.getRedoStack=function(){return this.redoStack},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stackArray=[]}return t.prototype.push=function(t){this.stackArray.push(t)},t.prototype.pop=function(){return this.stackArray.pop()},t.prototype.size=function(){return this.stackArray.length},t.prototype.clear=function(){this.stackArray=[]},t.prototype.filter=function(t){this.stackArray=this.stackArray.filter(t)},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(11)),r=i(n(19));function i(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e,this.undoRedoManager=n;var i=Promise.resolve();this.interpreter={annot:new o.default(e),user:new r.default(e),undo:function(t){i=i.finally((function(){return t.undo()}))},redo:function(t){i=i.finally((function(){return t.redo()}))}}}return t.prototype.before=function(t,e,n){this.beforeData={type:t,fnName:e,data:n}},t.prototype.after=function(t,e,n){var o=this.beforeData;o.type===t||o.fnName===e?this.create(t,e,Object.assign(o.data,n)):this.beforeData=null},t.prototype.create=function(t,e,n){this.undoRedoManager.storage(this.interpreter[t][e](n)),this.undoRedoManager.getRedoStack().clear()},t.prototype.clear=function(){this.undoRedoManager.clear()},t.prototype.undo=function(){var t=this.undoRedoManager.undo();t&&this.interpreter.undo(t)},t.prototype.redo=function(){var t=this.undoRedoManager.redo();t&&this.interpreter.redo(t)},t.prototype.popUndoStack=function(){this.undoRedoManager.getUndoStack().pop()},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),i=s(n(12)),a=s(n(13)),u=n(14);function s(t){return t&&t.__esModule?t:{default:t}}r.PDFViewCtrl.Consts.Intents;var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e}return t.prototype[o.ANNOTATION.SETCOLOR]=function(t){var e=t.annot,n=t.oldColor,o=t.newColor,r=this.pdfViewer;function i(t){return function(){var n=f(r,e);return-1===t&&(t=0),n.annot.setBorderColor(t).then((function(){n.updateRender()}))}}return{undo:i(n),redo:i(o)}},t.prototype[o.ANNOTATION.SETOPACITY]=function(t){var e=t.annot,n=t.oldOpacity,o=t.newOpacity,r=this.pdfViewer;function i(t){return function(){var n=f(r,e);return n.annot.setOpacity(t).then((function(){n.updateRender()}))}}return{undo:i(n),redo:i(o)}},t.prototype[o.ANNOTATION.SETFILLCOLOR]=function(t){var e=t.annot,n=t.oldFillColor,o=t.newFillColor,r=this.pdfViewer;function i(t){return function(){var n=f(r,e);(n.annot.setStyleFillColor||n.annot.setFillColor).call(n.annot,t)}}return{undo:i(n),redo:i(o)}},t.prototype[o.ANNOTATION.SETBORDERWIDTH]=function(t){var e=t.annot,n=t.oldBorderWidth,o=t.newBorderWidth,r=this.pdfViewer;function i(t){return function(){return f(r,e).annot.setBorderWidth(t)}}return{undo:i(n),redo:i(o)}},t.prototype[o.ANNOTATION.SETBORDERSTYLE]=function(t){var e=t.annot,n=t.oldBorderStyle,o=t.newBorderStyle,r=this.pdfViewer;function i(t){return function(){return f(r,e).annot.setBorderStyle(t.style,t.param)}}return{undo:i(n),redo:i(o)}},t.prototype[o.ANNOTATION.SETENDINGSTYLE]=function(t){var e=t.annot,n=t.isStart,o=t.oldStyle,r=t.newStyle,i=this.pdfViewer;function a(t){return function(){var o=f(i,e);return o.annot.setCalloutLineEndingStyle?o.annot.setCalloutLineEndingStyle(+t).then((function(){o.redraw(),o.activeRect()})):o.annot.setEndingStyle(n,+t).then((function(){o.redraw(),o.activeRect()}))}}return{undo:a(o),redo:a(r)}},t.prototype[o.ANNOTATION.ENABLECAPTION]=function(t){var e=t.annot,n=t.oldEnableCaption,o=t.newEnableCaption,r=this.pdfViewer;function i(t){return function(){return f(r,e).annot.enableCaption(t)}}return{undo:i(n),redo:i(o)}},t.prototype[o.ANNOTATION.SETROTATION]=function(t){var e=t.annot,n=t.oldRotation,o=t.newRotation,r=t.oldRect,i=t.newRect,a=this.pdfViewer;function u(t,n){return function(){var o=f(a,e);return"screen"===e.getType()?o.annot.setRect(n).then((function(e){if(e)return o.annot.setRotation((t+360)%360).then((function(){o.activeRect()}))})):o.annot.setRotation((t+360)%360).then((function(){o.activeRect()}))}}return{undo:u(n,r),redo:u(o,i)}},t.prototype[o.ANNOTATION.SETHIGHLIGHTINGMODE]=function(t){var e=t.annot,n=t.oldHlMode,o=t.newHlMode,r=this.pdfViewer;function i(t){return function(){return f(r,e).annot.setHighlightingMode(t)}}return{undo:i(n),redo:i(o)}},t.prototype[o.ANNOTATION.REMOVEANNOT]=function(t){var e=t.annot,n=t.replies,o=this.pdfViewer;return{undo:l(e,o,!1,n),redo:d(e,o)}},t.prototype[o.ANNOTATION.ADDANNOT]=function(t){var e=t.annot,n=this.pdfViewer;return{undo:d(e,n),redo:l(e,n,!1,e.replies)}},t.prototype[o.ANNOTATION.UPDATEQUADPOINTSBYCHARINDEX]=function(t){var e=t.annot,n=t.oldStart,o=t.oldEnd,r=t.newStart,i=t.newEnd,a=this.pdfViewer;function u(t,n){return function(){var o=f(a,e);return o.annot.updateQuadPointsByCharIndex(t,n).then((function(){if(o.redraw(),o.isReplace)return o.caretAnnot.moveRectByCharIndex(n).then((function(){o.getGroupRenders().map((function(t){t.active()}))}));o.active()}))}}return{undo:u(n,o),redo:u(r,i)}},t.prototype[o.ANNOTATION.SETRECT]=function(t){var e=t.annot,n=t.oldRect,o=t.newRect,r=this.pdfViewer;function i(t){return function(){var n=f(r,e);return n.annot.setRect(t).then((function(){n.redraw(),n.active()}))}}return{undo:i(n),redo:i(o)}},t.prototype[o.ANNOTATION.UPDATECALLOUTPOINTS]=function(t){var e=t.annot,n=t.oldRect,o=t.oldCalloutLinePoints,r=t.oldInnerRect,i=t.newRect,a=t.newCalloutLinePoints,u=t.newInnerRect,s=this.pdfViewer;function c(t,n,o){return function(){var r=f(s,e);return r.annot._setRect(t,!1).then((function(){return r.annot.setInnerRectNoAction(o).then((function(){return r.annot.setCalloutLinePoints(n).then((function(){return r.annot.update().then((function(){r.redraw(),r.active()}))}))}))}))}}return{undo:c(n,o,r),redo:c(i,a,u)}},t.prototype[o.ANNOTATION.UPDATELINEPOINTS]=function(t){var e=t.annot,n=t.oldStartPoint,o=t.oldEndPoint,r=t.newStartPoint,i=t.newEndPoint,a=this.pdfViewer;function u(t,n){return function(){var o=[],r=f(a,e);return o.push(r.annot.setStartPoint(t)),o.push(r.annot.setEndPoint(n)),Promise.all(o).then((function(){r.active()}))}}return{undo:u(n,o),redo:u(r,i)}},t.prototype[o.ANNOTATION.SETLEADERLINELENGTH]=function(t){var e=t.annot,n=t.oldLeaderLinePoints,o=t.oldStartPoint,r=t.oldEndPoint,i=t.newLeaderLinePoints,a=t.newStartPoint,u=t.newEndPoint,s=this.pdfViewer;function c(t,n,o){var r=t.start,i=(t.end,Math.sqrt(Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2))),a=!0;return(o.x-n.x)*(r.y-o.y)-(r.x-o.x)*(o.y-n.y)>0&&(a=!1),a&&(i=-i),function(){var t=f(s,e);return t.annot.setLeaderLineLength(i).then((function(){t.active()}))}}return{undo:c(n,o,r),redo:c(i,a,u)}},t.prototype[o.ANNOTATION.UPDATEVERTEXES]=function(t){var e=t.annot,n=t.oldVertexes,o=t.oldIndex,r=t.newVertexes,i=t.newIndex,a=this.pdfViewer;function u(t,n){return function(){var o=f(a,e);return o.annot.updateVertexes(t,n[t]).then((function(){o.active()}))}}return{undo:u(o,n),redo:u(i,r)}},t.prototype[o.ANNOTATION.SETCONTENT]=function(t){var e=t.annot,n=t.oldContent,o=t.newContent,r=t.oldInnerRect,i=t.newInnerRect,a=t.oldRect,u=t.newRect,s=t.oldCalloutLinePoints,c=t.newCalloutLinePoints,l=this.pdfViewer;function d(t,n,o,r){return function(){var i=f(l,e);return i.annot.setContent(t).then((function(){return o&&i.annot.setRect(o).then((function(){return n&&i.annot.setInnerRect(n).then((function(){return r&&i.annot.setCalloutLinePoints(r).then((function(){i.redraw(),i.active()}))}))}))}))}}return{undo:d(n,r,a,s),redo:d(o,i,u,c)}},t.prototype[o.ANNOTATION.PLACEREDACT]=function(t){var e=t.redacts;return{undo:function(){return Promise.all(e.map((function(t){return t.getPDFPage().removeAnnot(t)})))},redo:function(){return Promise.all(e.map((function(t){var e=new i.default(t).getJson();return t.getPDFPage().markRedactAnnot([t.info.rect],e)})))}}},t.prototype[o.ANNOTATION.ADDREPLY]=function(t){var e=t.annot,n=t.replyAnnot,o=this.pdfViewer;return{undo:h(e,n,o),redo:p(e,n,o)}},t.prototype[o.ANNOTATION.DELETEREPLY]=function(t){var e=t.annot,n=t.replyAnnot,o=this.pdfViewer;return{undo:p(e,n,o),redo:h(e,n,o)}},t.prototype[o.ANNOTATION.ADDACTION]=function(t){var e=t.annot,n=this.pdfViewer,o=e.getAction();return{undo:function(){return e.removeAction()},redo:function(){return function(t,e){return t.setAction(e.type).then((function(){var n=new a.default(e).toJson();return t.setActionData(n).then((function(){return function t(e,n){for(var o=n.subActionCount,r=[],i=function(o){r.push(e.insertSubAction(o,n.subAction[o].type).then((function(){var r=new RecoveryAction(n.subAction[o]).toJson(),i=e.getSubAction(o);return i.setActionData(r).then((function(){return t(i,n.subAction[o])}))})))},a=0;a<o;a++)i(a);return Promise.all(r)}(t.getAction(),e)}))}))}(f(n,e).annot,o.info)}}},t.prototype[o.ANNOTATION.ERASER]=function(t){var e=t.beforeInks,n=t.afterInks,o=this.pdfViewer;return{undo:function(){var t=e.map((function(t){var e=t.annot,n=t.inkList;return t.isRemove?l(e,o,!0)().then((function(){f(o,e).annot.setInkList(n)})):f(o,e).annot.setInkList(n)}));return Promise.all(t)},redo:function(){var t=n.map((function(t){var e=t.annot;t.inkList;return t.isRemove?d(e,o)():f(o,t.annot).annot.setInkList(t.inkList)}));return Promise.all(t)}}},t.prototype[o.ANNOTATION.MARKREDACTANNOT]=function(t){var e=t.annot,n=this.pdfViewer,o=new i.default(e).getJson();return{undo:d(e,n),redo:function(){return e.getPDFPage().markRedactAnnot(o.rects,o).then((function(){f(n,e).active()}))}}},t.prototype[o.ANNOTATION.MAKEREDACTBYPAGES]=function(t){var e=t.redacts,n=(this.pdfViewer,[]);return e.map((function(t){n.push(new i.default(t).getJson())})),{undo:function(){return Promise.all(e.map((function(t){return t.getPDFPage().removeAnnot(t)})))},redo:function(){return Promise.all(e.map((function(t,e){var o=n[e];return t.getPDFPage().markRedactAnnot([o.rect],o)})))}}},t.prototype[o.ANNOTATION.MARKCHECKEDRESULTREDACTION]=function(t){var e=t.redacts,n=[];return e.map((function(t){n.push(new i.default(t).getJson())})),{undo:function(){return Promise.all(e.map((function(t){return t.getPDFPage().removeAnnot(t)})))},redo:function(){return Promise.all(e.map((function(t,e){var o=n[e];return t.getPDFPage().markRedactAnnot([o.rect],o)})))}}},t.prototype[o.ANNOTATION.ADDREVIEWSTATE]=function(t){var e=t.annot,n=t.stateName,o=(this.pdfViewer,e.getPDFPage()),r=e.getUniqueID();return{undo:function(){return o.getAnnotsByIdArray([r]).then((function(t){return t[0]&&t[0].removeReviewState()}))},redo:function(){return o.getAnnotsByIdArray([r]).then((function(t){return t[0]&&t[0].addReviewState(n)}))}}},t.prototype[o.ANNOTATION.DEFAULTAP]=function(t){var e=t.annot,n=t.oldDA,o=t.newDA,r=this.pdfViewer;function i(t){return function(){var n=f(r,e);return n.annot.setDefaultAppearance(t).then((function(){n.active()}))}}return{undo:i(n),redo:i(o)}},t.prototype[o.ANNOTATION.moveAnnotsCrossPage]=function(t){var e=t.srcPage,n=t.destPage,o=t.annots,r=this.pdfViewer.getCurrentPDFDoc(),i=Object.keys(o).reduce((function(t,e){var n=o[e];return t[e]={offsetX:-n.offsetX,offsetY:-n.offsetY,targetObjNum:n.targetObjNum},t}),{});return{undo:function(){return r.moveAnnotsToPage(n,e,i,!0)},redo:function(){return r.moveAnnotsToPage(e,n,o,!0)}}},t}();function f(t,e){var n=e.info.id,o=e.page.getIndex();return t.getAnnotRender(o,n).component}function l(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=[],a=t.page;function u(t){var e=r.map((function(e){return t.addReply(e.content).then((function(t){return t.setUniqueID(e.id).then((function(){return t.setCreateDateTime(e.createTime).then((function(){return t.setModifiedDateTime(e.modifiedTime).then((function(){if(e.reviewStateNames.length>0)return T(t,e.reviewStateNames)}))}))}))}))}));return Promise.all(e)}o.map((function(t){var e=t.reviewStates||[],n=[];e.map((function(t){n.push(t.info.state)})),r.push({id:t.getId(),content:t.getContent(),createTime:new Date(t.getCreateDateTime()).getTime(),modifiedTime:new Date(t.getModifiedDateTime()).getTime(),reviewStateNames:n})}));var s=t.reviewStates||[],c=[];s.map((function(t){c.push(t.info.state)}));var l=void 0,d=void 0;return t.info.isMarkup&&t.info.isGrouped?(l=[],t.groupElements.map((function(t,e){l.push(new i.default(t).getJson()),t.isGroupHeader()&&(d=e)}))):l=new i.default(t).getJson(),"redact"===t.info.type?function(){return a.markRedactAnnot(l.rects,l)}:t.info.isMarkup&&t.info.isGrouped?function(){return a.addAnnotGroup(l,d).then((function(){var n=f(e,t);return c.length>0?T(n.annot,c).then((function(){return n})):n})).then((function(t){if(r.length>0)return u(t.annot).then((function(){t.getGroupRenders().map((function(t){!n&&t.active()}))}));t.getGroupRenders().map((function(t){!n&&t.active()}))}))}:function(){return a.addAnnot(l).then((function(){var n=f(e,t);return c.length>0?T(n.annot,c).then((function(){return n})):n})).then((function(t){r.length>0?u(t.annot).then((function(){!n&&t.active()})):!n&&t.active()}))}}function d(t,e){return function(){var n=f(e,t);return n.annot.getPDFPage().removeAnnot(n.annot)}}function p(t,e,n){return function(){return f(n,t).annot.addReply(e.getContent()).then((function(t){return t.setUniqueID(e.getId()).then((function(){return t.setCreateDateTime(new Date(e.getCreateDateTime()).getTime()).then((function(){return t.setModifiedDateTime(new Date(e.getModifiedDateTime()).getTime()).then((function(){var n=e.reviewStates;if(n.length>0){var o=[];return n.map((function(t){o.push(t.info.state)})),T(t,o)}}))}))}))}))}}function h(t,e,n){return function(){return t.getPDFPage().removeAnnot(e)}}function T(t,e){var n=new u.SerialPromise,o=e.map((function(e){return function(){return t.addReviewState(e)}}));return n.serial(o)}e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)).PDFViewCtrl.Consts.BORDER_STYLE,r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(t){var e,n,o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HTML",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a="",u=void 0;"number"==typeof t&&(t=["int",t]);switch(t[0]){case"int":e=(16711680&t[1])>>16,n=(65280&t[1])>>8,o=255&t[1];break;case"T":e=0,n=0,o=0,i=0;break;case"G":e=n=o=255*t[1];break;case"RGB":e=255*t[1],n=255*t[2],o=255*t[3];break;case"CMYK":e=(1-t[4])*(1-t[1])*255,n=(1-t[4])*(1-t[2])*255,o=(1-t[4])*(1-t[3])*255;break;case"r":u=t.match(/rgba?\((\d*),\s*(\d*),\s*(\d*),?\s*([\.0-9]*)?\)/),e=+u[1],n=+u[2],o=+u[3];break;case"#":var s=4==t.length?/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/:/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;u=t.match(s),e=parseInt(u[1],16),n=parseInt(u[2],16),o=parseInt(u[3],16);break;default:throw new Error("Unsupported color format")}switch(r){case"HTML":a=e===n&&n===o&&-1===o?"transparent":"rgba("+parseInt(e)+","+parseInt(n)+","+parseInt(o)+","+i+")";break;case"RGB":a=["RGB",e/255,n/255,o/255];break;case"#":a+=e<16?"#0"+e.toString(16):"#"+e.toString(16),a+=n<16?"0"+n.toString(16):n.toString(16),a+=o<16?"0"+o.toString(16):o.toString(16);break;case"int":a=0,a|=(i*=255)<<24,a|=e<<16,a|=n<<8,a|=o,a>>>=0}return a}(e.info.borderColor,"int");this.json={objNumber:e.info.objNumber,name:e.info.id,flags:e.info.flag,rect:e.info.rect,color:n,style:e.info.borderInfo.style,contents:e.info.content,date:new Date(e.info.modifiedTimestamp).getTime(),type:e.info.type,borderWidth:e.info.borderInfo.width},e.info.isMarkup&&this.markup(e);var o=e.info.type;switch("strikeout"!==o&&"highlight"!==o&&"squiggly"!==o&&"underline"!==o||this.textMarkup(e),o){case"ink":this.ink(e);break;case"fileattachment":this.fileattachment(e);break;case"polygon":this.polygon(e);break;case"polyline":this.polyline(e);break;case"stamp":this.stamp(e);break;case"freetext":this.freetext(e);break;case"screen":this.screen(e);break;case"line":this.line(e);break;case"redact":this.redact(e);break;case"highlight":this.highlight(e);break;case"link":this.link(e);break;case"square":this.square(e);break;case"circle":this.circle(e)}}return t.prototype.markup=function(t){var e="";if(t.getPopup){var n=t.getPopup();n&&(e=n.id)}this.json=Object.assign({intent:t.info.intent,opacity:t.info.opacity,subject:t.info.subject,title:t.info.title,creationTimestamp:new Date(t.info.creationTimestamp).getTime(),popId:e},this.json)},t.prototype.textMarkup=function(t){var e=[];t.info.quadPoints.map((function(t){e.push({top:t[0].y,left:t[0].x,bottom:t[3].y,right:t[3].x})})),this.json=Object.assign(this.json,{coords:e})},t.prototype.ink=function(t){this.json=Object.assign({inkList:t.info.inkList},this.json)},t.prototype.fileattachment=function(t){this.json=Object.assign({fObjNum:t.info.fObjNum},this.json)},t.prototype.polygon=function(t){var e=i(t.info.borderInfo);this.json=Object.assign(this.json,{vertexes:t.info.vertexes,borderStyle:e.style,borderStyleParam:e.param,fillColor:t.info.fillColor,style:void 0})},t.prototype.polyline=function(t){var e=i(t.info.borderInfo);this.json=Object.assign(this.json,{vertexes:t.info.vertexes,fillColor:t.info.fillColor,borderStyle:e.style,borderStyleParam:e.param,style:void 0,startStyle:t.info.startStyle,endStyle:t.info.endingStyle})},t.prototype.stamp=function(t){this.json=Object.assign({icon:t.info.icon,rotate:(t.info.rotation+360)%360,apObjeNum:t.info.apObjeNum},this.json)},t.prototype.freetext=function(t){var e=i(t.info.borderInfo),n="FreeTextTypewriter"==t.info.intent?0:t.info.fillColor;this.json=Object.assign(this.json,{calloutLinePoints:t.info.calloutLinePoints,innerRect:t.info.innerRect,borderStyle:e.style,borderStyleParam:e.param,style:void 0,"interior-color":n,calloutLineEndingStyle:t.info.calloutLineEndingStyle,defaultAppearance:t.info.defaultAppearance,rotate:t.info.rotation})},t.prototype.line=function(t){var e=i(t.info.borderInfo),n=t.info.measureRatio,o=t.info.measureUnit,r=null;n&&o&&(r={unit:o,ratio:n});var a=t.info.startPoint,u=t.info.endPoint;this.json=Object.assign(this.json,{styleFillColor:t.info.styleFillColor,startStyle:t.info.startStyle,endStyle:t.info.endingStyle,enableCaption:t.info.hasCaption,startPoint:{x:a.x,y:a.y},endPoint:{x:u.x,y:u.y},measure:r,borderStyle:e.style,borderStyleParam:e.param,style:void 0})},t.prototype.screen=function(t){var e=i(t.info.borderInfo);this.json=Object.assign({apObjNum:t.info.apObjNum,opacity:t.info.opacity,rotate:{0:0,90:1,180:2,270:3}[t.info.rotation],iObjNum:t.info.iObjNum,aObjNum:t.info.aObjNum,intensity:e.param},this.json)},t.prototype.redact=function(t){var e=t.info.quadPoints,n=[];e.length>0?e.map((function(t){n.push({left:t[0].x,right:t[3].x,top:t[0].y,bottom:t[3].y})})):n.push(t.info.rect),this.json=Object.assign(this.json,{rects:n,applyFillColor:t.info.applyFillColor})},t.prototype.highlight=function(t){t.info.isArea&&(this.json=Object.assign(this.json,{coords:[t.info.rect],dicts:{AreaHi:"AreaHi"}}),delete this.json.startCharIndex,delete this.json.endCharIndex)},t.prototype.link=function(t){var e=i(t.info.borderInfo);this.json=Object.assign(this.json,{aObjNum:t.info.aObjNum,borderStyle:e.style,borderStyleParam:e.param,style:void 0})},t.prototype.circle=function(t){var e=i(t.info.borderInfo);this.json=Object.assign(this.json,{fillColor:t.info.fillColor,borderStyle:e.style,borderStyleParam:e.param,style:void 0})},t.prototype.square=function(t){var e=i(t.info.borderInfo);this.json=Object.assign(this.json,{fillColor:t.info.fillColor,borderStyle:e.style,borderStyleParam:e.param,style:void 0})},t.prototype.getJson=function(){return this.json},t}();function i(t){var e=t.style,n=t.cloudIntensity,r=t.dashes,i=void 0;switch(e){case o.SOLID:i=[];break;case o.CLOUDY:i=n;break;case o.DASHED:i=r}return{style:e,param:i}}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.action=e,this.json={},this[e.type]()}return t.prototype.TypeGoto=function(){var t=this.action.destination;this.json=Object.assign(t,{type:t.zoomMode})},t.prototype.TypeURI=function(){var t=this.action.uri;this.json=Object.assign({},{uri:t})},t.prototype.TypeJavaScript=function(){var t=this.action.javascript;this.json=Object.assign({},{script:t})},t.prototype.TypeNamed=function(){var t=this.action.name;this.json=Object.assign({},{name:t})},t.prototype.TypeHide=function(){var t=this.action,e=t.fieldNames,n=t.hideState;this.json=Object.assign({},{fieldNames:e,hideState:n})},t.prototype.TypeSubmitForm=function(){var t=this.action,e=t.flags,n=t.url,o=t.fieldNames;this.json=Object.assign({},{flags:e,url:n,fieldNames:o})},t.prototype.TypeResetForm=function(){var t=this.action,e=t.flags,n=t.fieldNames;this.json=Object.assign({},{flags:e,fieldNames:n})},t.prototype.TypeGoToR=function(){var t=this.action,e=t.destinationName,n=t.destination;this.json=Object.assign({},{destinationName:e,destination:n})},t.prototype.toJson=function(){return this.json},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SerialEnhancePromise=e.SerialPromise=e.DebounceAsyncTaskExecutor=e.DebouncePromiseQueue=void 0;var o,r=n(4),i=(o=r)&&o.__esModule?o:{default:o},a=n(15),u=n(17);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function(){},f=function(){function t(){s(this,t),this.queue=[],this.promise=Promise.resolve()}return t.prototype.push=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return this.queue.push([t,n]),new Promise((function(t,n){setTimeout((function(){return e.exec()}),o)}))},t.prototype.exec=function(){var t=this;if(!this.execIng){var e=this.queue.pop();if(e){this.execIng=!0;for(var n=0,o=this.queue.length;n<o;n++)this.queue[n][1]();return this.queue=[],Promise.resolve(e[0]()).catch((function(){try{return Promise.resolve(e[1]()).catch(c)}catch(t){}})).finally((function(){t.execIng=!1,setTimeout((function(){t.exec()}),30)}))}}},t.prototype.end=function(){this.queue=[]},t}(),l=function(){function t(){s(this,t),this.executor=new u.QueuedAsyncTaskExecutor}return t.prototype.serial=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.executor.cancel(),this.executor.waitForCurrentRunningTasks().then((function(){return t.executor.resume(),t.executor.execTasks(e.map((function(t){return{task:t}})))}))},t.prototype.push=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.executor.execTasks(e.map((function(t){return{task:t}})))},t.prototype.unshift=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.executor.insert(e.map((function(t){return{task:t}}))),this.executor.waitForCurrentRunningTasks()},t.prototype.concat=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach((function(e){t.executor.exec(e)})),this.executor.waitForCurrentRunningTasks()},t.prototype.exec=function(){return this.executor.waitForCurrentRunningTasks()},t.prototype.end=function(){return this.executor.cancel(),this.executor.waitForCurrentRunningTasks()},t}(),d=function(){function t(){s(this,t),this.queue=[],this.continueExec=!0,this.deferred=(0,i.default)(),this.task=Promise.resolve()}return t.prototype.serial=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.queue=t,this.exec(),this.deferred.promise},t.prototype.push=function(){this.queue.push.apply(this.queue,arguments)},t.prototype.unshift=function(){this.queue.unshift.apply(this.queue,arguments)},t.prototype.concat=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.queue.concat(t)},t.prototype.exec=function(){var t=this;if(!this.execIng){this.execIng=!0;var e=this.queue.shift()||[c],n=e[0]();return this.execIngEnd=e[1]||c,Promise.resolve(n).finally((function(){return t.execIng=!1,t.queue.length?t.continueExec?void t.task.then((function(e){return t.exec()})):(t.queue=[],t.deferred.resolve(n)):t.deferred.resolve(n)})).catch(c),this.deferred.promise}},t.prototype.end=function(){if(this.execIng)try{Promise.resolve(this.execIngEnd()).catch(c)}catch(t){}return this.continueExec=!1,this.queue=[],this.deferred.promise},t}();e.DebouncePromiseQueue=f,e.DebounceAsyncTaskExecutor=a.DebounceAsyncTaskExecutor,e.SerialPromise=l,e.SerialEnhancePromise=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DebounceAsyncTaskExecutor=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=a(n(4)),i=a(n(16));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.DebounceAsyncTaskExecutor=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;u(this,t),this.interval=e,this.status=t.STATUS_IDLE,this.defer=(0,r.default)(),this.lastTaskPromise=null,this.cancelLast=i.default}return o(t,null,[{key:"STATUS_IDLE",get:function(){return"idle"}},{key:"STATUS_RUNNING",get:function(){return"running"}},{key:"STATUS_READY",get:function(){return"ready"}},{key:"STATUS_CANCELED",get:function(){return"canceled"}},{key:"STATUS_DESTROYED",get:function(){return"destroyed"}}]),t.prototype.exec=function(e,n,o){var i=this;if(this.status!==t.STATUS_DESTROYED){switch(this.status){case t.STATUS_IDLE:case t.STATUS_READY:this.cancelLast();var a=setTimeout((function(a){if(i.status!==t.STATUS_DESTROYED)if(i.status!==t.STATUS_CANCELED){i.status=t.STATUS_RUNNING;var u=i.defer,s=u.resolve,c=u.reject,f=function(){i.status=t.STATUS_IDLE,i.defer=(0,r.default)()};try{var l=e.apply(o,n||[]);l instanceof Promise?l.finally(f).then(s,c):(s(l),f())}catch(t){c(t)}}else i.status=t.STATUS_IDLE}),this.interval);this.cancelLast=function(){clearTimeout(a)};break;case t.STATUS_RUNNING:var u=function(){switch(i.status){case t.STATUS_IDLE:i.status=t.STATUS_READY;break;case t.STATUS_CANCELED:return void(i.status=t.STATUS_IDLE);case t.STATUS_DESTROYED:return}return i.exec(e,n,o)};return this.lastTaskPromise=this.defer.promise.then(u,u)}return this.lastTaskPromise=this.defer.promise}},t.prototype.waitForLastTask=function(t){return this.lastTaskPromise||Promise.resolve(t)},t.prototype.cancel=function(){this.status=t.STATUS_CANCELED},t.prototype.destroy=function(){this.status=t.STATUS_DESTROYED},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){}},function(t,e,n){"use strict";n.r(e),n.d(e,"QueuedAsyncTaskExecutor",(function(){return r}));var o=n(1),r=function(){function t(){this.runningPromise=o.RESOLVED_PROMISE_VOID,this.isCanceled=!1,this.isRunning=!1,this.inserts=[]}return t.prototype.execTasks=function(t){var e=this;if(t.length<1)return Promise.resolve();this.isRunning=!0;var n=t.reduce((function(n,o,r){var i=function(i){if(e.isCanceled)return e.runningPromise=n,r===t.length-1&&(e.isCanceled=!1),e.inserts.length=0,n;(o.args||[]).push(i);var a=function(){return o.task.apply(o.context,o.args)},u=e.executeInserts(n);return u?u.then(a,a):a()};return n?n.then(i,i):o.task.apply(o.context,o.args)}),this.runningPromise),o=function(){if(e.inserts.length>0)return e.execTasks(e.inserts)};return this.runningPromise=n.then(o,o).finally((function(){e.isRunning=!1}))},t.prototype.exec=function(t,e,n){void 0===e&&(e=1);var o=("number"==typeof e?Array(e).fill(0).map((function(t,e){return[e]})):e).map((function(e){return{task:t,args:e,context:n}}));return this.execTasks(o)},t.prototype.insert=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.isRunning?(t=this.inserts).push.apply(t,e):this.execTasks(e)},t.prototype.resume=function(){this.isCanceled=!1},t.prototype.cancel=function(){this.isCanceled=!0},t.prototype.waitForCurrentRunningTasks=function(){return this.runningPromise},t.prototype.executeInserts=function(t){var e=this;if(0!==this.inserts.length)try{this.inserts.reduce((function(t,n){var o=function(){return e.isCanceled?t:n.task.apply(n.context,n.args)};return t?t.then(o,o):o()}),t||o.RESOLVED_PROMISE_VOID)}finally{this.inserts.length=0}},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={MARKED:"marked",UNMARKED:"unmarked",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled",COMPLETED:"completed",NONE:"none"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfViewer=e}return t.prototype.add=function(t,e){this[t]=e},t}();e.default=o},function(t,e){t.exports=null}]).default}));